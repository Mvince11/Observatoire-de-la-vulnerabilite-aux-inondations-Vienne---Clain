<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Carte Intercative</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-50d9bcb11822c80bf0f019c801faaf0a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-dashboard/quarto-dashboard.js"></script>
<script src="site_libs/quarto-dashboard/stickythead.js"></script>
<script src="site_libs/quarto-dashboard/datatables.min.js" kdttablesentinel="true"></script>
<script src="site_libs/quarto-dashboard/pdfmake.min.js" kdttablesentinel="true"></script>
<script src="site_libs/quarto-dashboard/vfs_fonts.js" kdttablesentinel="true"></script>
<script src="site_libs/quarto-dashboard/web-components.js" type="module"></script>
<script src="site_libs/quarto-dashboard/components.js"></script>
<link href="site_libs/quarto-dashboard/datatables.min.css" rel="stylesheet" kdttablesentinel="true">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script src="site_libs/core-js-2.5.3/shim.min.js"></script>

<script src="site_libs/react-18.2.0/react.min.js"></script>

<script src="site_libs/react-18.2.0/react-dom.min.js"></script>

<script src="site_libs/reactwidget-2.0.0/react-tools.js"></script>

<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/reactable-0.4.4/reactable.css" rel="stylesheet">

<script src="site_libs/reactable-binding-0.4.4/reactable.js"></script>

<script src="js/maplibre.js"></script>
<link href="js/maplibre.css" rel="stylesheet">
<script src="js/jquery_3.5.min.js" type="text/javascript"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<link rel="stylesheet" href="js/photon-geocoder-autocomplete.min.css" type="text/css">
<script src="js/photon-geocoder-autocomplete.min.js" type="text/javascript"></script>


</head>

<body class="quarto-dashboard nav-fixed dashboard-fill dashboard-sidebar fullcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-xl " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./Images/logo_porteurs_projet_transparent.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Accueil</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./mieux_comprendre.html"> 
<span class="menu-text">Les inondations ?</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-objectif-n°1" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Objectif n°1</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-objectif-n°1">    
        <li>
    <a class="dropdown-item" href="./batiments_plain_pied.html">
 <span class="dropdown-text">Bâtiments plain-pied</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-objectif-n°2" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Objectif n°2</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-objectif-n°2">    
        <li>
    <a class="dropdown-item" href="./dommages_entreprises.html">
 <span class="dropdown-text">Dommages aux entreprises</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-objectif-n°3" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Objectif n°3</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-objectif-n°3">    
        <li>
    <a class="dropdown-item" href="./habitants_zones_inondables.html">
 <span class="dropdown-text">Nombre et proportion d’habitants en zone inondable</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-propos" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Â propos</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-propos">    
        <li>
    <a class="dropdown-item" href="https://www.eptb-vienne.fr" target="_blank">
 <span class="dropdown-text">EPTB-vienne.fr</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://fr.linkedin.com/company/eptb-vienne" title="LinkedIn" class="quarto-navigation-tool px-1" aria-label="LinkedIn"><i class="bi bi-linkedin"></i></a>
    <a href="https://eptb-vienne.fr/contact" title="Nous contacter" class="quarto-navigation-tool px-1" aria-label="Nous contacter"><i class="bi bi-envelope"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
<header id="quarto-dashboard-header">
<nav class="navbar navbar-expand-md slim" data-bs-theme="dark">
  <div class="navbar-container container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-controls="dashboard-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>    


    <div class="navbar-brand-container">       

      <div class="navbar-title">
        <div class="navbar-title-text"><a href="#">Carte Intercative</a></div>
        
        
      </div>
    </div>
<div id="dashboard-collapse" class="navbar-collapse collapse"><ul class="navbar-nav navbar-nav-scroll me-auto" role="tablist"><li class="nav-item" role="presentation"><a id="tab-cartographie" class="nav-link active" data-bs-toggle="tab" role="tab" data-bs-target="#cartographie" data-scrolling="false" href="#cartographie" aria-controls="cartographie" aria-selected="true"><span class="nav-link-text">Cartographie</span></a></li><li class="nav-item" role="presentation"><a id="tab-informations-relatives-à-lindicateur" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#informations-relatives-à-lindicateur" data-scrolling="false" href="#informations-relatives-à-lindicateur" aria-controls="informations-relatives-à-lindicateur" aria-selected="false"><span class="nav-link-text">Informations relatives à l’indicateur</span></a></li></ul></div></div>
</nav>
</header></header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-layout-custom page-navbar quarto-dashboard-content bslib-gap-spacing html-fill-container bslib-page-fill quarto-dashboard-pages dashboard-sidebar-container">
<!-- sidebar -->
<!-- margin-sidebar -->
<!-- main -->

<div class="bslib-sidebar-layout html-fill-item html-fill-container" data-bslib-sidebar-open="desktop" data-bslib-sidebar-init="true" data-bslib-sidebar-border="false" data-bslib-sidebar-border-radius="false"><div class="main html-fill-container html-fill-item"><div class="sidebar-content html-fill-item html-fill-container">
<div class="tab-content bslib-grid html-fill-item html-fill-container" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div id="cartographie" class="dashboard-page tab-pane show active html-fill-item html-fill-container" data-orientation="columns" aria-labelledby="tab-cartographie">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-columns: minmax(3em, 60fr) minmax(3em, 40fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="cell hidden html-fill-item html-fill-container">
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb2" data-startfrom="61" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 60;"><span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>bassin_vienne <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/bassin_vienne.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>departement <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/departement.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>region <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/region.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>epci <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/epci.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>perimetre <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/perimetre.json"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>slgri <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/slgri.json"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>tri <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/tri.json"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>zone_inondable <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/zone_inondable.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>indicateurs <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/indicateurs.json"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>cours_d_eau <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/cours_d_eau.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>indicateursGeojson <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/indicateurs.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-1" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-2" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-3" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-4" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-5" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-6" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-7" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-8" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-9" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-10" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-2-11" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
</div>
<div class="card cell html-fill-item html-fill-container bslib-card" data-fill="true" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container" style="padding: 0px;">
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb3" data-startfrom="80" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 79;"><span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>map <span class="op">=</span> {</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> container <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div class="map-container" id="map" style="height: 665px; width: 100%;"&gt;&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> container<span class="op">;</span></span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sourcePlanIGN <span class="op">=</span> {</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">style</span><span class="op">:</span> <span class="st">'normal'</span><span class="op">,</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> <span class="st">'image/png'</span><span class="op">,</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>    <span class="dt">layer</span><span class="op">:</span> <span class="st">'GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2'</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sourceOrtho <span class="op">=</span> {</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>    <span class="dt">style</span><span class="op">:</span> <span class="st">'normal'</span><span class="op">,</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>    <span class="dt">format</span><span class="op">:</span> <span class="st">'image/jpeg'</span><span class="op">,</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>    <span class="dt">layer</span><span class="op">:</span> <span class="st">'HR.ORTHOIMAGERY.ORTHOPHOTOS'</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> map <span class="op">=</span> <span class="kw">new</span> maplibregl<span class="op">.</span><span class="fu">Map</span>({</span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>    <span class="dt">container</span><span class="op">:</span> container<span class="op">,</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">style</span><span class="op">:</span> <span class="st">'https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json'</span><span class="op">,</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;!--</span> <span class="dt">center</span><span class="op">:</span> [<span class="op">-</span><span class="fl">0.04</span><span class="op">,</span> <span class="fl">46.3051</span>]<span class="op">,</span>  <span class="op">--&gt;</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>    <span class="dt">zoom</span><span class="op">:</span> <span class="dv">11</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>  map<span class="op">.</span><span class="fu">addControl</span>(<span class="kw">new</span> maplibregl<span class="op">.</span><span class="fu">FullscreenControl</span>()<span class="op">,</span> <span class="st">'top-right'</span>)<span class="op">;</span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>  map<span class="op">.</span><span class="fu">addControl</span>(<span class="kw">new</span> maplibregl<span class="op">.</span><span class="fu">NavigationControl</span>({ <span class="dt">visualizePitch</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">,</span> <span class="st">'top-left'</span>)<span class="op">;</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>  map<span class="op">.</span><span class="fu">addControl</span>(<span class="kw">new</span> maplibregl<span class="op">.</span><span class="fu">ScaleControl</span>({ <span class="dt">maxWidth</span><span class="op">:</span> <span class="dv">80</span><span class="op">,</span> <span class="dt">unit</span><span class="op">:</span> <span class="st">'metric'</span> }))<span class="op">;</span></span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> toggleStyle <span class="op">=</span> (useOrtho) <span class="kw">=&gt;</span> {</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (useOrtho) {</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">setLayoutProperty</span>(<span class="st">'orthoIGN'</span><span class="op">,</span> <span class="st">'visibility'</span><span class="op">,</span> <span class="st">'visible'</span>)<span class="op">;</span></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">setLayoutProperty</span>(<span class="st">'planIGN'</span><span class="op">,</span> <span class="st">'visibility'</span><span class="op">,</span> <span class="st">'none'</span>)<span class="op">;</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">setLayoutProperty</span>(<span class="st">'orthoIGN'</span><span class="op">,</span> <span class="st">'visibility'</span><span class="op">,</span> <span class="st">'none'</span>)<span class="op">;</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">setLayoutProperty</span>(<span class="st">'planIGN'</span><span class="op">,</span> <span class="st">'visibility'</span><span class="op">,</span> <span class="st">'visible'</span>)<span class="op">;</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>  map<span class="op">.</span><span class="fu">on</span>(<span class="st">'load'</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">fitBounds</span>(</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>    [</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>      [<span class="op">-</span><span class="fl">0.04</span><span class="op">,</span> <span class="fl">46.3051</span>]<span class="op">,</span>   <span class="co">// Sud-Ouest</span></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>      [<span class="fl">0.7741</span><span class="op">,</span> <span class="fl">46.8565</span>]   <span class="co">// Nord-Est</span></span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">,</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>      <span class="dt">padding</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>      <span class="dt">linear</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>      <span class="dt">duration</span><span class="op">:</span> <span class="dv">0</span></span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ajout des fonds raster IGN</span></span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">addSource</span>(<span class="st">'raster-planign'</span><span class="op">,</span> {</span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">'raster'</span><span class="op">,</span></span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tiles</span><span class="op">:</span> [</span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>        <span class="vs">`https://data.geopf.fr/wmts?SERVICE=WMTS&amp;style=</span><span class="sc">${</span>sourcePlanIGN<span class="op">.</span><span class="at">style</span><span class="sc">}</span><span class="vs">&amp;VERSION=1.0.0&amp;REQUEST=GetTile&amp;format=</span><span class="sc">${</span>sourcePlanIGN<span class="op">.</span><span class="at">format</span><span class="sc">}</span><span class="vs">&amp;layer=</span><span class="sc">${</span>sourcePlanIGN<span class="op">.</span><span class="at">layer</span><span class="sc">}</span><span class="vs">&amp;tilematrixset=PM&amp;TileMatrix={z}&amp;TileCol={x}&amp;TileRow={y}`</span></span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tileSize</span><span class="op">:</span> <span class="dv">256</span><span class="op">,</span></span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a>      <span class="dt">attribution</span><span class="op">:</span> <span class="st">'© &lt;a href="https://www.ign.fr/"&gt;IGN&lt;/a&gt;'</span><span class="op">,</span></span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a>      <span class="dt">minzoom</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a>      <span class="dt">maxzoom</span><span class="op">:</span> <span class="dv">22</span></span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">addSource</span>(<span class="st">'raster-ortho'</span><span class="op">,</span> {</span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">'raster'</span><span class="op">,</span></span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tiles</span><span class="op">:</span> [</span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a>        <span class="vs">`https://data.geopf.fr/wmts?SERVICE=WMTS&amp;style=</span><span class="sc">${</span>sourceOrtho<span class="op">.</span><span class="at">style</span><span class="sc">}</span><span class="vs">&amp;VERSION=1.0.0&amp;REQUEST=GetTile&amp;format=</span><span class="sc">${</span>sourceOrtho<span class="op">.</span><span class="at">format</span><span class="sc">}</span><span class="vs">&amp;layer=</span><span class="sc">${</span>sourceOrtho<span class="op">.</span><span class="at">layer</span><span class="sc">}</span><span class="vs">&amp;tilematrixset=PM&amp;TileMatrix={z}&amp;TileCol={x}&amp;TileRow={y}`</span></span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tileSize</span><span class="op">:</span> <span class="dv">256</span><span class="op">,</span></span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a>      <span class="dt">attribution</span><span class="op">:</span> <span class="st">'© &lt;a href="https://www.ign.fr/"&gt;IGN&lt;/a&gt;'</span><span class="op">,</span></span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a>      <span class="dt">minzoom</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a>      <span class="dt">maxzoom</span><span class="op">:</span> <span class="dv">22</span></span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">addLayer</span>({</span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a>      <span class="dt">id</span><span class="op">:</span> <span class="st">'planIGN'</span><span class="op">,</span></span>
<span id="cb3-155"><a href="#cb3-155" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">'raster'</span><span class="op">,</span></span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a>      <span class="dt">source</span><span class="op">:</span> <span class="st">'raster-planign'</span><span class="op">,</span></span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a>      <span class="dt">layout</span><span class="op">:</span> { <span class="dt">visibility</span><span class="op">:</span> <span class="st">'visible'</span> }</span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">addLayer</span>({</span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a>      <span class="dt">id</span><span class="op">:</span> <span class="st">'orthoIGN'</span><span class="op">,</span></span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a>      <span class="dt">type</span><span class="op">:</span> <span class="st">'raster'</span><span class="op">,</span></span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a>      <span class="dt">source</span><span class="op">:</span> <span class="st">'raster-ortho'</span><span class="op">,</span></span>
<span id="cb3-164"><a href="#cb3-164" aria-hidden="true" tabindex="-1"></a>      <span class="dt">layout</span><span class="op">:</span> { <span class="dt">visibility</span><span class="op">:</span> <span class="st">'none'</span> }</span>
<span id="cb3-165"><a href="#cb3-165" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a>    <span class="co">//fetch('layers/indicateurs.geojson')</span></span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a>     <span class="co">//.then(response =&gt; response.json())</span></span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a>     <span class="co">//.then(indicateursGeojson =&gt; { </span></span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> layersData <span class="op">=</span> [</span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">data</span><span class="op">:</span> bassin_vienne<span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">'line'</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="st">'bassinvienneLayer'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'green'</span><span class="op">,</span> <span class="dt">layout</span><span class="op">:</span> {<span class="dt">visibility</span><span class="op">:</span><span class="st">'none'</span>}}<span class="op">,</span></span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">data</span><span class="op">:</span> region<span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">'line'</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="st">'regionLayer'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">layout</span><span class="op">:</span> {<span class="dt">visibility</span><span class="op">:</span><span class="st">'none'</span>} }<span class="op">,</span></span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">data</span><span class="op">:</span> departement<span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">'line'</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="st">'departementLayer'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'#a772b9'</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span>  <span class="dt">layout</span><span class="op">:</span>{<span class="dt">visibility</span><span class="op">:</span><span class="st">'none'</span>}}<span class="op">,</span></span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">data</span><span class="op">:</span> epci<span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">'line'</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="st">'epciLayer'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'#567ae3'</span><span class="op">,</span> <span class="dt">layout</span><span class="op">:</span> {<span class="dt">visibility</span><span class="op">:</span><span class="st">'none'</span>} }<span class="op">,</span></span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>      {  <span class="dt">data</span><span class="op">:</span> indicateursGeojson<span class="op">,</span> <span class="co">// GeoJSON contenant une propriété 's31atx'</span></span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">'fill'</span><span class="op">,</span></span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>          <span class="dt">id</span><span class="op">:</span> <span class="st">'indicateurs31atxLayer'</span><span class="op">,</span></span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a>          <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.9</span><span class="op">,</span></span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a>          <span class="dt">dynamicColor</span><span class="op">:</span> { </span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a>            <span class="dt">property</span><span class="op">:</span> <span class="st">'s31atx'</span><span class="op">,</span></span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a>            <span class="co">// La logique exacte de la légende à appliquer :</span></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a>            <span class="co">// - 0 ou null =&gt; #d9d9d9</span></span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a>            <span class="co">// - &lt; 150     =&gt; #f9f0d9</span></span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a>            <span class="co">// - &lt; 500000  =&gt; #fdb77a</span></span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a>            <span class="co">// - &lt; 2000000 =&gt; #ec603F</span></span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a>            <span class="co">// - &gt;= 2000000 =&gt; #b30000</span></span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a>            <span class="dt">mapping</span><span class="op">:</span> {</span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a>              <span class="st">'0'</span><span class="op">:</span> <span class="st">'#d9d9d9'</span><span class="op">,</span></span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a>              <span class="st">'1'</span><span class="op">:</span> <span class="st">'#fff5f0'</span><span class="op">,</span></span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a>              <span class="st">'4'</span><span class="op">:</span> <span class="st">'#fca487'</span><span class="op">,</span></span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a>              <span class="st">'10'</span><span class="op">:</span> <span class="st">'#eb362a'</span><span class="op">,</span></span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a>              <span class="st">'20'</span><span class="op">:</span> <span class="st">'#67000d'</span></span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a>            }<span class="op">,</span></span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a>            <span class="cf">default</span><span class="op">:</span> <span class="st">'#cdcdcd'</span> <span class="co">// utilisé si null, undefined ou &lt; 150</span></span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a>          }<span class="op">,</span></span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a>          <span class="dt">layout</span><span class="op">:</span> { <span class="dt">visibility</span><span class="op">:</span> <span class="st">'visible'</span> }</span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">data</span><span class="op">:</span> zone_inondable<span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">'fill'</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="st">'zoneinondableLayer'</span><span class="op">,</span> <span class="dt">color</span><span class="op">:</span> <span class="st">'#b4c3ef'</span> <span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> </span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a>      <span class="dt">layout</span><span class="op">:</span> {<span class="dt">visibility</span><span class="op">:</span><span class="st">'visible'</span>} }</span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-205"><a href="#cb3-205" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb3-206"><a href="#cb3-206" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb3-207"><a href="#cb3-207" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ajout des couches vectorielles</span></span>
<span id="cb3-208"><a href="#cb3-208" aria-hidden="true" tabindex="-1"></a>      layersData<span class="op">.</span><span class="fu">forEach</span>(layer <span class="kw">=&gt;</span> {</span>
<span id="cb3-209"><a href="#cb3-209" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">addSource</span>(layer<span class="op">.</span><span class="at">id</span><span class="op">,</span> {</span>
<span id="cb3-210"><a href="#cb3-210" aria-hidden="true" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> <span class="st">'geojson'</span><span class="op">,</span></span>
<span id="cb3-211"><a href="#cb3-211" aria-hidden="true" tabindex="-1"></a>          <span class="dt">data</span><span class="op">:</span> layer<span class="op">.</span><span class="at">data</span></span>
<span id="cb3-212"><a href="#cb3-212" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb3-213"><a href="#cb3-213" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-214"><a href="#cb3-214" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> layerConfig <span class="op">=</span> {</span>
<span id="cb3-215"><a href="#cb3-215" aria-hidden="true" tabindex="-1"></a>          <span class="dt">id</span><span class="op">:</span> layer<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb3-216"><a href="#cb3-216" aria-hidden="true" tabindex="-1"></a>          <span class="dt">type</span><span class="op">:</span> layer<span class="op">.</span><span class="at">type</span><span class="op">,</span></span>
<span id="cb3-217"><a href="#cb3-217" aria-hidden="true" tabindex="-1"></a>          <span class="dt">source</span><span class="op">:</span> layer<span class="op">.</span><span class="at">id</span><span class="op">,</span></span>
<span id="cb3-218"><a href="#cb3-218" aria-hidden="true" tabindex="-1"></a>          <span class="dt">paint</span><span class="op">:</span> {}<span class="op">,</span></span>
<span id="cb3-219"><a href="#cb3-219" aria-hidden="true" tabindex="-1"></a>          <span class="dt">layout</span><span class="op">:</span> layer<span class="op">.</span><span class="at">layout</span></span>
<span id="cb3-220"><a href="#cb3-220" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb3-221"><a href="#cb3-221" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-222"><a href="#cb3-222" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (layer<span class="op">.</span><span class="at">type</span> <span class="op">===</span> <span class="st">'fill'</span>) {</span>
<span id="cb3-223"><a href="#cb3-223" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (layer<span class="op">.</span><span class="at">dynamicColor</span>) {</span>
<span id="cb3-224"><a href="#cb3-224" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> prop <span class="op">=</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">;</span></span>
<span id="cb3-225"><a href="#cb3-225" aria-hidden="true" tabindex="-1"></a>            layerConfig<span class="op">.</span><span class="at">paint</span>[<span class="st">'fill-color'</span>] <span class="op">=</span> [</span>
<span id="cb3-226"><a href="#cb3-226" aria-hidden="true" tabindex="-1"></a>              <span class="st">'case'</span><span class="op">,</span></span>
<span id="cb3-227"><a href="#cb3-227" aria-hidden="true" tabindex="-1"></a>              [<span class="st">'!'</span><span class="op">,</span> [<span class="st">'has'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]]<span class="op">,</span> <span class="st">'#cdcdcd'</span><span class="op">,</span>                       <span class="co">// Propriété absente</span></span>
<span id="cb3-228"><a href="#cb3-228" aria-hidden="true" tabindex="-1"></a>              [<span class="st">'any'</span><span class="op">,</span> [<span class="st">'=='</span><span class="op">,</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">,</span> <span class="kw">null</span>]<span class="op">,</span> [<span class="st">'=='</span><span class="op">,</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span> <span class="st">'#cdcdcd'</span><span class="op">,</span> <span class="co">// null ou 0</span></span>
<span id="cb3-229"><a href="#cb3-229" aria-hidden="true" tabindex="-1"></a>              [<span class="st">'&lt;='</span><span class="op">,</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> <span class="st">'#fff5f0'</span><span class="op">,</span></span>
<span id="cb3-230"><a href="#cb3-230" aria-hidden="true" tabindex="-1"></a>              [<span class="st">'&lt;'</span><span class="op">,</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">,</span> <span class="dv">4</span>]<span class="op">,</span> <span class="st">'#fca487'</span><span class="op">,</span></span>
<span id="cb3-231"><a href="#cb3-231" aria-hidden="true" tabindex="-1"></a>              [<span class="st">'&lt;'</span><span class="op">,</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">,</span> <span class="dv">10</span>]<span class="op">,</span> <span class="st">'#eb362a'</span><span class="op">,</span></span>
<span id="cb3-232"><a href="#cb3-232" aria-hidden="true" tabindex="-1"></a>              [<span class="st">'&gt;'</span><span class="op">,</span> [<span class="st">'get'</span><span class="op">,</span> layer<span class="op">.</span><span class="at">dynamicColor</span><span class="op">.</span><span class="at">property</span>]<span class="op">,</span> <span class="dv">10</span>]<span class="op">,</span> <span class="st">'#67000d'</span><span class="op">,</span></span>
<span id="cb3-233"><a href="#cb3-233" aria-hidden="true" tabindex="-1"></a>              <span class="st">'#d9d9d9'</span> <span class="co">// fallback</span></span>
<span id="cb3-234"><a href="#cb3-234" aria-hidden="true" tabindex="-1"></a>            ]<span class="op">;</span></span>
<span id="cb3-235"><a href="#cb3-235" aria-hidden="true" tabindex="-1"></a>          } <span class="cf">else</span> {</span>
<span id="cb3-236"><a href="#cb3-236" aria-hidden="true" tabindex="-1"></a>            layerConfig<span class="op">.</span><span class="at">paint</span>[<span class="st">'fill-color'</span>] <span class="op">=</span> layer<span class="op">.</span><span class="at">color</span> <span class="op">||</span> <span class="st">'#000000'</span><span class="op">;</span></span>
<span id="cb3-237"><a href="#cb3-237" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb3-238"><a href="#cb3-238" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-239"><a href="#cb3-239" aria-hidden="true" tabindex="-1"></a>          layerConfig<span class="op">.</span><span class="at">paint</span>[<span class="st">'fill-opacity'</span>] <span class="op">=</span> layer<span class="op">.</span><span class="at">opacity</span> <span class="op">||</span> <span class="fl">0.4</span><span class="op">;</span></span>
<span id="cb3-240"><a href="#cb3-240" aria-hidden="true" tabindex="-1"></a>          layerConfig<span class="op">.</span><span class="at">paint</span>[<span class="st">'fill-outline-color'</span>] <span class="op">=</span> <span class="st">'#000000'</span><span class="op">;</span></span>
<span id="cb3-241"><a href="#cb3-241" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-242"><a href="#cb3-242" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> <span class="cf">if</span> (layer<span class="op">.</span><span class="at">type</span> <span class="op">===</span> <span class="st">'line'</span>) {</span>
<span id="cb3-243"><a href="#cb3-243" aria-hidden="true" tabindex="-1"></a>          layerConfig<span class="op">.</span><span class="at">paint</span>[<span class="st">'line-color'</span>] <span class="op">=</span> layer<span class="op">.</span><span class="at">color</span> <span class="op">||</span> <span class="st">'#000000'</span><span class="op">;</span></span>
<span id="cb3-244"><a href="#cb3-244" aria-hidden="true" tabindex="-1"></a>          layerConfig<span class="op">.</span><span class="at">paint</span>[<span class="st">'line-width'</span>] <span class="op">=</span> layer<span class="op">.</span><span class="at">width</span> <span class="op">||</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-245"><a href="#cb3-245" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-246"><a href="#cb3-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-247"><a href="#cb3-247" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">addLayer</span>(layerConfig)<span class="op">;</span></span>
<span id="cb3-248"><a href="#cb3-248" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a>         map<span class="op">.</span><span class="fu">addLayer</span>({</span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">id</span><span class="op">:</span> <span class="st">'indicateurs31atxLabels'</span><span class="op">,</span></span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">type</span><span class="op">:</span> <span class="st">'symbol'</span><span class="op">,</span></span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">source</span><span class="op">:</span> <span class="st">'indicateurs31atxLayer'</span><span class="op">,</span> <span class="co">// le même id que ta source GeoJSON</span></span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">layout</span><span class="op">:</span> {</span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-field'</span><span class="op">:</span> [<span class="st">'get'</span><span class="op">,</span> <span class="st">'nom'</span>]<span class="op">,</span></span>
<span id="cb3-255"><a href="#cb3-255" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-size'</span><span class="op">:</span> <span class="dv">11</span><span class="op">,</span></span>
<span id="cb3-256"><a href="#cb3-256" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-font'</span><span class="op">:</span> [<span class="st">'Open Sans Bold'</span><span class="op">,</span> <span class="st">'Arial Unicode MS Bold'</span>]<span class="op">,</span></span>
<span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-offset'</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="fl">0.6</span>]<span class="op">,</span></span>
<span id="cb3-258"><a href="#cb3-258" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-anchor'</span><span class="op">:</span> <span class="st">'top'</span></span>
<span id="cb3-259"><a href="#cb3-259" aria-hidden="true" tabindex="-1"></a>                  }<span class="op">,</span></span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a>                  <span class="dt">paint</span><span class="op">:</span> {</span>
<span id="cb3-261"><a href="#cb3-261" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-color'</span><span class="op">:</span> <span class="st">'#000000'</span><span class="op">,</span></span>
<span id="cb3-262"><a href="#cb3-262" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-halo-color'</span><span class="op">:</span> <span class="st">'#ffffff'</span><span class="op">,</span></span>
<span id="cb3-263"><a href="#cb3-263" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'text-halo-width'</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb3-264"><a href="#cb3-264" aria-hidden="true" tabindex="-1"></a>                  }</span>
<span id="cb3-265"><a href="#cb3-265" aria-hidden="true" tabindex="-1"></a>                })<span class="op">;</span></span>
<span id="cb3-266"><a href="#cb3-266" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb3-267"><a href="#cb3-267" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">addLayer</span>({</span>
<span id="cb3-268"><a href="#cb3-268" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">id</span><span class="op">:</span> <span class="st">'indicateurs31atx-hover'</span><span class="op">,</span></span>
<span id="cb3-269"><a href="#cb3-269" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">type</span><span class="op">:</span> <span class="st">'line'</span><span class="op">,</span></span>
<span id="cb3-270"><a href="#cb3-270" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">source</span><span class="op">:</span> <span class="st">'indicateurs31atxLayer'</span><span class="op">,</span> <span class="co">// même source</span></span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">paint</span><span class="op">:</span> {</span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'line-color'</span><span class="op">:</span> <span class="st">'#000'</span><span class="op">,</span></span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'line-width'</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a>                  }<span class="op">,</span></span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">filter</span><span class="op">:</span> [<span class="st">'=='</span><span class="op">,</span> <span class="st">'nom'</span><span class="op">,</span> <span class="st">''</span>] <span class="co">// vide au début</span></span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a>                  })<span class="op">;</span></span>
<span id="cb3-277"><a href="#cb3-277" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-278"><a href="#cb3-278" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">on</span>(<span class="st">'click'</span><span class="op">,</span> <span class="st">'indicateurs31atxLayer'</span><span class="op">,</span> (e) <span class="kw">=&gt;</span> {</span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> feature <span class="op">=</span> e<span class="op">.</span><span class="at">features</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> nom <span class="op">=</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nom</span> <span class="op">||</span> <span class="st">'Non disponible'</span><span class="op">;</span></span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> population <span class="op">=</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">population</span></span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">population</span><span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>) <span class="op">+</span> <span class="st">' habitants'</span></span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">'Non disponible'</span><span class="op">;</span></span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-288"><a href="#cb3-288" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> s31atxValue <span class="op">=</span> <span class="pp">parseFloat</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">s31atx</span>)<span class="op">;</span></span>
<span id="cb3-289"><a href="#cb3-289" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> dommages <span class="op">=</span> <span class="op">!</span><span class="pp">isNaN</span>(s31atxValue)</span>
<span id="cb3-290"><a href="#cb3-290" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> s31atxValue<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>) <span class="op">+</span> <span class="st">' %'</span></span>
<span id="cb3-291"><a href="#cb3-291" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">'0 %'</span><span class="op">;</span></span>
<span id="cb3-292"><a href="#cb3-292" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> s31apopValue <span class="op">=</span> <span class="pp">parseFloat</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">s31apop</span>)<span class="op">;</span></span>
<span id="cb3-293"><a href="#cb3-293" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> hab_inondable <span class="op">=</span> <span class="op">!</span><span class="pp">isNaN</span>(s31apopValue)</span>
<span id="cb3-294"><a href="#cb3-294" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> s31apopValue<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>)</span>
<span id="cb3-295"><a href="#cb3-295" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">'0'</span><span class="op">;</span></span>
<span id="cb3-296"><a href="#cb3-296" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batimentsValue <span class="op">=</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nb_batiments</span><span class="op">;</span></span>
<span id="cb3-297"><a href="#cb3-297" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batiments <span class="op">=</span> <span class="op">!</span><span class="pp">isNaN</span>(<span class="pp">parseFloat</span>(batimentsValue))</span>
<span id="cb3-298"><a href="#cb3-298" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="pp">parseInt</span>(batimentsValue)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>)</span>
<span id="cb3-299"><a href="#cb3-299" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">'Non disponible'</span><span class="op">;</span></span>
<span id="cb3-300"><a href="#cb3-300" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batindif <span class="op">=</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nb_bat_indif</span><span class="op">?.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>)<span class="op">;</span></span>
<span id="cb3-301"><a href="#cb3-301" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batsportifValue <span class="op">=</span> <span class="pp">parseFloat</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nb_bat_sportif</span>)<span class="op">;</span></span>
<span id="cb3-302"><a href="#cb3-302" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batsportif <span class="op">=</span> (<span class="op">!</span><span class="pp">isNaN</span>(batsportifValue) <span class="op">?</span> batsportifValue <span class="op">:</span> <span class="dv">0</span>)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>)<span class="op">;</span></span>
<span id="cb3-303"><a href="#cb3-303" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batagricolefValue <span class="op">=</span> <span class="pp">parseFloat</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nb_bat_agricole</span>)<span class="op">;</span></span>
<span id="cb3-304"><a href="#cb3-304" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batagricole <span class="op">=</span> (<span class="op">!</span><span class="pp">isNaN</span>(batagricolefValue) <span class="op">?</span> batagricolefValue <span class="op">:</span> <span class="dv">0</span>)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>)<span class="op">;</span></span>
<span id="cb3-305"><a href="#cb3-305" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batresidentielValue <span class="op">=</span> <span class="pp">parseFloat</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nb_bat_residentiel</span>)<span class="op">;</span></span>
<span id="cb3-306"><a href="#cb3-306" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> batresidentiel <span class="op">=</span> (<span class="op">!</span><span class="pp">isNaN</span>(batresidentielValue) <span class="op">?</span> batresidentielValue <span class="op">:</span> <span class="dv">0</span>)<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">'fr-FR'</span>)<span class="op">;</span></span>
<span id="cb3-307"><a href="#cb3-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-308"><a href="#cb3-308" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-309"><a href="#cb3-309" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> popupContent <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb3-310"><a href="#cb3-310" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;style&gt;</span></span>
<span id="cb3-311"><a href="#cb3-311" aria-hidden="true" tabindex="-1"></a><span class="vs">          .maplibregl-popup-content {</span></span>
<span id="cb3-312"><a href="#cb3-312" aria-hidden="true" tabindex="-1"></a><span class="vs">            padding: 4px !important;</span></span>
<span id="cb3-313"><a href="#cb3-313" aria-hidden="true" tabindex="-1"></a><span class="vs">            border: 1px solid;</span></span>
<span id="cb3-314"><a href="#cb3-314" aria-hidden="true" tabindex="-1"></a><span class="vs">            border-radius: 8px;</span></span>
<span id="cb3-315"><a href="#cb3-315" aria-hidden="true" tabindex="-1"></a><span class="vs">            width: max-content;</span></span>
<span id="cb3-316"><a href="#cb3-316" aria-hidden="true" tabindex="-1"></a><span class="vs">            box-shadow: rgba(101, 147, 220, 0.2) 0px 4px 8px 0px;</span></span>
<span id="cb3-317"><a href="#cb3-317" aria-hidden="true" tabindex="-1"></a><span class="vs">            border-color: rgba(101, 147, 220, 0.5);</span></span>
<span id="cb3-318"><a href="#cb3-318" aria-hidden="true" tabindex="-1"></a><span class="vs">          }</span></span>
<span id="cb3-319"><a href="#cb3-319" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;/style&gt;</span></span>
<span id="cb3-320"><a href="#cb3-320" aria-hidden="true" tabindex="-1"></a><span class="vs">          &lt;div style="font-family: sans-serif; font-size: 13px; margin:10px;"&gt;</span></span>
<span id="cb3-321"><a href="#cb3-321" aria-hidden="true" tabindex="-1"></a><span class="vs">          &lt;div style="background-color: #d1ee9c; border: 1px solid; border-radius:8px; margin-bottom:16px; padding:10px;"&gt;&lt;strong&gt;</span></span>
<span id="cb3-322"><a href="#cb3-322" aria-hidden="true" tabindex="-1"></a><span class="vs">          &lt;center&gt;</span><span class="sc">${</span>nom<span class="sc">}</span><span class="vs">&lt;/center&gt;</span></span>
<span id="cb3-323"><a href="#cb3-323" aria-hidden="true" tabindex="-1"></a><span class="vs">          &lt;/strong&gt;&lt;/div&gt;</span></span>
<span id="cb3-324"><a href="#cb3-324" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;p&gt;&lt;strong&gt;Population :&lt;/strong&gt; </span><span class="sc">${</span>population<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-325"><a href="#cb3-325" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;p&gt;&lt;strong&gt;Taux d'habitants en zone inondable :&lt;/strong&gt; </span><span class="sc">${</span>dommages<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-326"><a href="#cb3-326" aria-hidden="true" tabindex="-1"></a><span class="vs">            &lt;p&gt;&lt;strong&gt;Nombre d'habitants en zone inondable :&lt;/strong&gt; </span><span class="sc">${</span>hab_inondable<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb3-327"><a href="#cb3-327" aria-hidden="true" tabindex="-1"></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb3-328"><a href="#cb3-328" aria-hidden="true" tabindex="-1"></a><span class="vs">        `</span><span class="op">;</span></span>
<span id="cb3-329"><a href="#cb3-329" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-330"><a href="#cb3-330" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-331"><a href="#cb3-331" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> maplibregl<span class="op">.</span><span class="fu">Popup</span>({<span class="dt">closeButton</span><span class="op">:</span> <span class="kw">false</span>})</span>
<span id="cb3-332"><a href="#cb3-332" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">setLngLat</span>(e<span class="op">.</span><span class="at">lngLat</span>)</span>
<span id="cb3-333"><a href="#cb3-333" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">setHTML</span>(popupContent)</span>
<span id="cb3-334"><a href="#cb3-334" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb3-335"><a href="#cb3-335" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb3-336"><a href="#cb3-336" aria-hidden="true" tabindex="-1"></a>          <span class="co">// Mettre à jour le conteneur HTML avec les informations spécifiques du marqueur </span></span>
<span id="cb3-337"><a href="#cb3-337" aria-hidden="true" tabindex="-1"></a>         <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'donnees'</span>)<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb3-338"><a href="#cb3-338" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;strong style="font-size:1.2em"&gt;&lt;i class="bi bi-geo-alt-fill"&gt;&lt;/i&gt; Commune :&lt;/strong&gt; </span><span class="sc">${</span>nom<span class="sc">}</span><span class="vs">&lt;br&gt;</span></span>
<span id="cb3-339"><a href="#cb3-339" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;strong style="font-size:1.2em"&gt;&lt;i class="bi bi-people-fill"&gt;&lt;/i&gt; Nombre d'habitants :&lt;/strong&gt;      </span><span class="sc">${</span>population<span class="sc">}</span><span class="vs">&lt;br&gt;</span></span>
<span id="cb3-340"><a href="#cb3-340" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;strong style="font-size:1.2em"&gt;&lt;i class="bi bi-percent"&gt;&lt;/i&gt; Taux d'habitants en zone inondable :&lt;/strong&gt; </span><span class="sc">${</span>dommages<span class="sc">}</span><span class="vs">&lt;br&gt;</span></span>
<span id="cb3-341"><a href="#cb3-341" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;strong style="font-size:1.2em"&gt;&lt;i class="bi bi-person-fill"&gt;&lt;/i&gt; Nombre d'habitants en zone inondable                 :&lt;/strong&gt; </span><span class="sc">${</span>hab_inondable<span class="sc">}</span><span class="vs">&lt;br&gt;</span></span>
<span id="cb3-342"><a href="#cb3-342" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;strong style="font-size:1.2em"&gt;&lt;i class="bi bi-house-fill"&gt;&lt;/i&gt; Nombre de bâtiments :&lt;/strong&gt; </span><span class="sc">${</span>batiments<span class="sc">}</span><span class="vs">&lt;br&gt;</span></span>
<span id="cb3-343"><a href="#cb3-343" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;strong style="margin-left:8%;"&gt;Dont : &lt;/strong&gt;</span></span>
<span id="cb3-344"><a href="#cb3-344" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;li style="margin-left:15%;"&gt;&lt;h5 style="font-size:1em;"&gt; </span><span class="sc">${</span>batindif<span class="sc">}</span><span class="vs">&lt;strong&gt; bâtiments indifférenciés&lt;/strong&gt;&lt;/h5&gt;&lt;/li&gt;</span></span>
<span id="cb3-345"><a href="#cb3-345" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;li style="margin-left:15%;"&gt;&lt;h5 style="font-size:1em;"&gt; </span><span class="sc">${</span>batsportif<span class="sc">}</span><span class="vs">&lt;strong&gt; bâtiments sportifs&lt;/strong&gt;&lt;/h5&gt;&lt;/li&gt;</span></span>
<span id="cb3-346"><a href="#cb3-346" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;li style="margin-left:15%;"&gt;&lt;h5 style="font-size:1em;"&gt; </span><span class="sc">${</span>batagricole<span class="sc">}</span><span class="vs">&lt;strong&gt; bâtiments agricoles&lt;/strong&gt;&lt;/h5&gt;&lt;/li&gt;</span></span>
<span id="cb3-347"><a href="#cb3-347" aria-hidden="true" tabindex="-1"></a><span class="vs">         &lt;li style="margin-left:15%;"&gt;&lt;h5 style="font-size:1em;"&gt; </span><span class="sc">${</span>batresidentiel<span class="sc">}</span><span class="vs">&lt;strong&gt; bâtiments résidentiels&lt;/strong&gt;&lt;/h5&gt;&lt;/li&gt;</span></span>
<span id="cb3-348"><a href="#cb3-348" aria-hidden="true" tabindex="-1"></a><span class="vs">         `</span><span class="op">;</span></span>
<span id="cb3-349"><a href="#cb3-349" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb3-350"><a href="#cb3-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-351"><a href="#cb3-351" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">on</span>(<span class="st">'mousemove'</span><span class="op">,</span> <span class="st">'indicateurs31atxLayer'</span><span class="op">,</span> (e) <span class="kw">=&gt;</span> {</span>
<span id="cb3-352"><a href="#cb3-352" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (e<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb3-353"><a href="#cb3-353" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> nomCommune <span class="op">=</span> e<span class="op">.</span><span class="at">features</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">nom</span><span class="op">;</span></span>
<span id="cb3-354"><a href="#cb3-354" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-355"><a href="#cb3-355" aria-hidden="true" tabindex="-1"></a>          map<span class="op">.</span><span class="fu">setFilter</span>(<span class="st">'indicateurs31atx-hover'</span><span class="op">,</span> [<span class="st">'=='</span><span class="op">,</span> <span class="st">'nom'</span><span class="op">,</span> nomCommune])<span class="op">;</span></span>
<span id="cb3-356"><a href="#cb3-356" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-357"><a href="#cb3-357" aria-hidden="true" tabindex="-1"></a>          map<span class="op">.</span><span class="fu">getCanvas</span>()<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cursor</span> <span class="op">=</span> <span class="st">'pointer'</span><span class="op">;</span></span>
<span id="cb3-358"><a href="#cb3-358" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-359"><a href="#cb3-359" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb3-360"><a href="#cb3-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-361"><a href="#cb3-361" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">on</span>(<span class="st">'mouseleave'</span><span class="op">,</span> <span class="st">'indicateurs31atxLayer'</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb3-362"><a href="#cb3-362" aria-hidden="true" tabindex="-1"></a>          map<span class="op">.</span><span class="fu">setFilter</span>(<span class="st">'indicateurs31atx-hover'</span><span class="op">,</span> [<span class="st">'=='</span><span class="op">,</span> <span class="st">'nom'</span><span class="op">,</span> <span class="st">''</span>])<span class="op">;</span></span>
<span id="cb3-363"><a href="#cb3-363" aria-hidden="true" tabindex="-1"></a>          map<span class="op">.</span><span class="fu">getCanvas</span>()<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cursor</span> <span class="op">=</span> <span class="st">''</span><span class="op">;</span></span>
<span id="cb3-364"><a href="#cb3-364" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb3-365"><a href="#cb3-365" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb3-366"><a href="#cb3-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-367"><a href="#cb3-367" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Interface de contrôle des couches</span></span>
<span id="cb3-368"><a href="#cb3-368" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> mapLayersDiv <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'div'</span>)<span class="op">;</span></span>
<span id="cb3-369"><a href="#cb3-369" aria-hidden="true" tabindex="-1"></a>    mapLayersDiv<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">'mapLayers'</span>)<span class="op">;</span></span>
<span id="cb3-370"><a href="#cb3-370" aria-hidden="true" tabindex="-1"></a>    mapLayersDiv<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">position</span> <span class="op">=</span> <span class="st">'absolute'</span><span class="op">;</span></span>
<span id="cb3-371"><a href="#cb3-371" aria-hidden="true" tabindex="-1"></a>    mapLayersDiv<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">zIndex</span> <span class="op">=</span> <span class="st">'1000'</span><span class="op">;</span></span>
<span id="cb3-372"><a href="#cb3-372" aria-hidden="true" tabindex="-1"></a>    mapLayersDiv<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb3-373"><a href="#cb3-373" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;button id="toggleMapMenuButton" class="btn btn-light aria-label="Afficher les couches" title="Afficher les couches"&gt;</span></span>
<span id="cb3-374"><a href="#cb3-374" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;img src="Images/icons/layers-half.svg" alt="Icône SVG" width="25" height="25"&gt;</span></span>
<span id="cb3-375"><a href="#cb3-375" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;/button&gt;</span></span>
<span id="cb3-376"><a href="#cb3-376" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;div id="layersList" style="display: none; background: white; padding: 10px; border: 1px solid #ccc;"&gt;&lt;/div&gt;</span></span>
<span id="cb3-377"><a href="#cb3-377" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="op">;</span></span>
<span id="cb3-378"><a href="#cb3-378" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">getContainer</span>()<span class="op">.</span><span class="fu">appendChild</span>(mapLayersDiv)<span class="op">;</span></span>
<span id="cb3-379"><a href="#cb3-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-380"><a href="#cb3-380" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> toggleableLayerIds <span class="op">=</span> layersData<span class="op">.</span><span class="fu">map</span>(layer <span class="kw">=&gt;</span> layer<span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb3-381"><a href="#cb3-381" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> aliasLayerIds <span class="op">=</span> {</span>
<span id="cb3-382"><a href="#cb3-382" aria-hidden="true" tabindex="-1"></a>      <span class="dt">bassinvienneLayer</span><span class="op">:</span> <span class="st">'Bassin de la Vienne'</span><span class="op">,</span></span>
<span id="cb3-383"><a href="#cb3-383" aria-hidden="true" tabindex="-1"></a>      <span class="dt">regionLayer</span><span class="op">:</span> <span class="st">'Région'</span><span class="op">,</span></span>
<span id="cb3-384"><a href="#cb3-384" aria-hidden="true" tabindex="-1"></a>      <span class="dt">departementLayer</span><span class="op">:</span> <span class="st">'Département'</span><span class="op">,</span></span>
<span id="cb3-385"><a href="#cb3-385" aria-hidden="true" tabindex="-1"></a>      <span class="dt">epciLayer</span><span class="op">:</span> <span class="st">'EPCI'</span><span class="op">,</span></span>
<span id="cb3-386"><a href="#cb3-386" aria-hidden="true" tabindex="-1"></a>      <span class="dt">zoneinondableLayer</span><span class="op">:</span> <span class="st">'Zonage Inondable'</span><span class="op">,</span></span>
<span id="cb3-387"><a href="#cb3-387" aria-hidden="true" tabindex="-1"></a>      <span class="dt">indicateurs31atxLayer</span><span class="op">:</span> <span class="st">'Dommages financiers des entreprises'</span></span>
<span id="cb3-388"><a href="#cb3-388" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb3-389"><a href="#cb3-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-390"><a href="#cb3-390" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">toggleLayerVisibility</span>(id<span class="op">,</span> visible) {</span>
<span id="cb3-391"><a href="#cb3-391" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> visibility <span class="op">=</span> visible <span class="op">?</span> <span class="st">'visible'</span> <span class="op">:</span> <span class="st">'none'</span><span class="op">;</span></span>
<span id="cb3-392"><a href="#cb3-392" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (map<span class="op">.</span><span class="fu">getLayer</span>(id)) {</span>
<span id="cb3-393"><a href="#cb3-393" aria-hidden="true" tabindex="-1"></a>        map<span class="op">.</span><span class="fu">setLayoutProperty</span>(id<span class="op">,</span> <span class="st">'visibility'</span><span class="op">,</span> visibility)<span class="op">;</span></span>
<span id="cb3-394"><a href="#cb3-394" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-395"><a href="#cb3-395" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-396"><a href="#cb3-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-397"><a href="#cb3-397" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> layersListDiv <span class="op">=</span> mapLayersDiv<span class="op">.</span><span class="fu">querySelector</span>(<span class="st">'#layersList'</span>)<span class="op">;</span></span>
<span id="cb3-398"><a href="#cb3-398" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-399"><a href="#cb3-399" aria-hidden="true" tabindex="-1"></a>    toggleableLayerIds<span class="op">.</span><span class="fu">forEach</span>(id <span class="kw">=&gt;</span> {</span>
<span id="cb3-400"><a href="#cb3-400" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> name <span class="op">=</span> aliasLayerIds[id] <span class="op">||</span> id<span class="op">;</span></span>
<span id="cb3-401"><a href="#cb3-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-402"><a href="#cb3-402" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> checkbox <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'input'</span>)<span class="op">;</span></span>
<span id="cb3-403"><a href="#cb3-403" aria-hidden="true" tabindex="-1"></a>      checkbox<span class="op">.</span><span class="at">type</span> <span class="op">=</span> <span class="st">'checkbox'</span><span class="op">;</span></span>
<span id="cb3-404"><a href="#cb3-404" aria-hidden="true" tabindex="-1"></a>      checkbox<span class="op">.</span><span class="at">id</span> <span class="op">=</span> id<span class="op">;</span></span>
<span id="cb3-405"><a href="#cb3-405" aria-hidden="true" tabindex="-1"></a>      checkbox<span class="op">.</span><span class="at">className</span> <span class="op">=</span> <span class="st">'form-check-input'</span><span class="op">;</span></span>
<span id="cb3-406"><a href="#cb3-406" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-407"><a href="#cb3-407" aria-hidden="true" tabindex="-1"></a>      <span class="co">// ✅ Lire la visibilité actuelle directement dans la carte</span></span>
<span id="cb3-408"><a href="#cb3-408" aria-hidden="true" tabindex="-1"></a>      map<span class="op">.</span><span class="fu">once</span>(<span class="st">'idle'</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb3-409"><a href="#cb3-409" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> visibility <span class="op">=</span> map<span class="op">.</span><span class="fu">getLayoutProperty</span>(id<span class="op">,</span> <span class="st">'visibility'</span>)<span class="op">;</span></span>
<span id="cb3-410"><a href="#cb3-410" aria-hidden="true" tabindex="-1"></a>        checkbox<span class="op">.</span><span class="at">checked</span> <span class="op">=</span> visibility <span class="op">===</span> <span class="st">'visible'</span><span class="op">;</span></span>
<span id="cb3-411"><a href="#cb3-411" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb3-412"><a href="#cb3-412" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-413"><a href="#cb3-413" aria-hidden="true" tabindex="-1"></a>      checkbox<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'change'</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="fu">toggleLayerVisibility</span>(id<span class="op">,</span> checkbox<span class="op">.</span><span class="at">checked</span>))<span class="op">;</span></span>
<span id="cb3-414"><a href="#cb3-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-415"><a href="#cb3-415" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> label <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'label'</span>)<span class="op">;</span></span>
<span id="cb3-416"><a href="#cb3-416" aria-hidden="true" tabindex="-1"></a>      label<span class="op">.</span><span class="at">htmlFor</span> <span class="op">=</span> id<span class="op">;</span></span>
<span id="cb3-417"><a href="#cb3-417" aria-hidden="true" tabindex="-1"></a>      label<span class="op">.</span><span class="at">className</span> <span class="op">=</span> <span class="st">'form-check-label'</span><span class="op">;</span></span>
<span id="cb3-418"><a href="#cb3-418" aria-hidden="true" tabindex="-1"></a>      label<span class="op">.</span><span class="at">innerText</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb3-419"><a href="#cb3-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-420"><a href="#cb3-420" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> wrapper <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'div'</span>)<span class="op">;</span></span>
<span id="cb3-421"><a href="#cb3-421" aria-hidden="true" tabindex="-1"></a>      wrapper<span class="op">.</span><span class="at">className</span> <span class="op">=</span> <span class="st">'form-check'</span><span class="op">;</span></span>
<span id="cb3-422"><a href="#cb3-422" aria-hidden="true" tabindex="-1"></a>      wrapper<span class="op">.</span><span class="fu">appendChild</span>(checkbox)<span class="op">;</span></span>
<span id="cb3-423"><a href="#cb3-423" aria-hidden="true" tabindex="-1"></a>      wrapper<span class="op">.</span><span class="fu">appendChild</span>(label)<span class="op">;</span></span>
<span id="cb3-424"><a href="#cb3-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-425"><a href="#cb3-425" aria-hidden="true" tabindex="-1"></a>      layersListDiv<span class="op">.</span><span class="fu">appendChild</span>(wrapper)<span class="op">;</span></span>
<span id="cb3-426"><a href="#cb3-426" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-427"><a href="#cb3-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-428"><a href="#cb3-428" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'toggleMapMenuButton'</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb3-429"><a href="#cb3-429" aria-hidden="true" tabindex="-1"></a>      layersListDiv<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> layersListDiv<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">===</span> <span class="st">'none'</span> <span class="op">?</span> <span class="st">'block'</span> <span class="op">:</span> <span class="st">'none'</span><span class="op">;</span></span>
<span id="cb3-430"><a href="#cb3-430" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-431"><a href="#cb3-431" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb3-432"><a href="#cb3-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-433"><a href="#cb3-433" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Menu bascule fond de plan</span></span>
<span id="cb3-434"><a href="#cb3-434" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> mapMenuDiv <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'div'</span>)<span class="op">;</span></span>
<span id="cb3-435"><a href="#cb3-435" aria-hidden="true" tabindex="-1"></a>    mapMenuDiv<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">'mapFondDePlan'</span>)<span class="op">;</span></span>
<span id="cb3-436"><a href="#cb3-436" aria-hidden="true" tabindex="-1"></a>    mapMenuDiv<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">position</span> <span class="op">=</span> <span class="st">'absolute'</span><span class="op">;</span></span>
<span id="cb3-437"><a href="#cb3-437" aria-hidden="true" tabindex="-1"></a>    mapMenuDiv<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">zIndex</span> <span class="op">=</span> <span class="st">'1000'</span><span class="op">;</span></span>
<span id="cb3-438"><a href="#cb3-438" aria-hidden="true" tabindex="-1"></a>    mapMenuDiv<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb3-439"><a href="#cb3-439" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;strong&gt;Fond de plan :&lt;/strong&gt;</span></span>
<span id="cb3-440"><a href="#cb3-440" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;div class="form-check form-switch"&gt;</span></span>
<span id="cb3-441"><a href="#cb3-441" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;input class="form-check-input" type="checkbox" role="switch" id="orthoCheckbox"&gt;</span></span>
<span id="cb3-442"><a href="#cb3-442" aria-hidden="true" tabindex="-1"></a><span class="vs">        &lt;label class="form-check-label" for="orthoCheckbox"&gt;Photos aériennes&lt;/label&gt;</span></span>
<span id="cb3-443"><a href="#cb3-443" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb3-444"><a href="#cb3-444" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="op">;</span></span>
<span id="cb3-445"><a href="#cb3-445" aria-hidden="true" tabindex="-1"></a>    map<span class="op">.</span><span class="fu">getContainer</span>()<span class="op">.</span><span class="fu">appendChild</span>(mapMenuDiv)<span class="op">;</span></span>
<span id="cb3-446"><a href="#cb3-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-447"><a href="#cb3-447" aria-hidden="true" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'orthoCheckbox'</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'change'</span><span class="op">,</span> <span class="kw">function</span> (e) {</span>
<span id="cb3-448"><a href="#cb3-448" aria-hidden="true" tabindex="-1"></a>      e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb3-449"><a href="#cb3-449" aria-hidden="true" tabindex="-1"></a>      e<span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb3-450"><a href="#cb3-450" aria-hidden="true" tabindex="-1"></a>      <span class="fu">toggleStyle</span>(<span class="kw">this</span><span class="op">.</span><span class="at">checked</span>)<span class="op">;</span></span>
<span id="cb3-451"><a href="#cb3-451" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb3-452"><a href="#cb3-452" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-453"><a href="#cb3-453" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div id="ojs-cell-3" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div><div class="card tabset html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-header bslib-navs-card-title"><div class="card-title html-fill-item html-fill-container"><span style="display: inline">

</span></div><ul class="nav nav-tabs card-header-tabs" role="tablist" data-tabsetid="card-tabset-2"><li class="nav-item" role="presentation"><a href="#card-tabset-2-1" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Données de la commune" aria-selected="true" class="nav-link active">Données de la commune</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-2-2" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Tableau de données" aria-selected="false" class="nav-link">Tableau de données</a></li><li class="nav-item" role="presentation"><a href="#card-tabset-2-3" role="tab" data-toggle="tab" data-bs-toggle="tab" data-value="Graphiques" aria-selected="false" class="nav-link">Graphiques</a></li></ul></div>



<div class="tab-content html-fill-item html-fill-container" data-tabset-id="card-tabset-2"><div class="tab-pane active show html-fill-item html-fill-container" role="tabpanel" id="card-tabset-2-1"><div class="card-body html-fill-item html-fill-container" data-title="Données de la commune">
<div class="flow bslib-grid" data-layout="flow" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container" style="padding: 5px;">
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb4" data-startfrom="473" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 472;"><span id="cb4-473"><a href="#cb4-473" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb4-474"><a href="#cb4-474" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;div id="donnees" style="font-family: Arial, sans-serif; font-size: 16px; line-height: 1.5; margin-top:1%;"&gt;</span></span>
<span id="cb4-475"><a href="#cb4-475" aria-hidden="true" tabindex="-1"></a><span class="vs">    Cliquez sur une commune pour voir les informations ici.&lt;br&gt;</span></span>
<span id="cb4-476"><a href="#cb4-476" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb4-477"><a href="#cb4-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-478"><a href="#cb4-478" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div id="ojs-cell-4" data-nodetype="expression" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-2-2"><div class="card-body html-fill-item html-fill-container" data-title="Tableau de données">
<div class="flow bslib-grid" data-layout="flow" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div class="reactable html-widget html-fill-item html-fill-container" id="htmlwidget-41f319321ae1ed1c48b0" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-41f319321ae1ed1c48b0">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Code INSEE":["86095","86014","86088","86253","86062","86239","86114","86032","86298","86163","86124","86020","86261","86046","86091","86028","86213","86070","86233","86202","86058","86135","86226","86031","86024","86133","86194","86027","86158","86066","86041","86174","86139","86019","86115","86214","86116","86222","86244","86045","86256","86198","86157","86268","86080","86263","86297","86100","86083"],"Commune":["Dissay","Availles-en-Châtellerault","Croutelle","Sanxay","Chasseneuil-du-Poitou","Sainte-Radégonde","Jardres","Bonneuil-Matours","Vouneuil-sur-Vienne","Montamisé","Lavoux","Bellefonds","Sèvres-Anxaumont","Cenon-sur-Vienne","Curzay-sur-Vonne","Bignoux","Rouillé","Chauvigny","Valdivienne","La Puye","La Chapelle-Moulière","Liniers","Saint-Julien-l'Ars","Bonnes","Béruges","Ligugé","Poitiers","Biard","Migné-Auxances","Châtellerault","Buxerolles","Naintré","Lusignan","Beaumont Saint-Cyr","Jaunay-Marigny","Saint-Benoît","Jazeneuil","Saint-Georges-lès-Baillargeaux","Saint-Sauvant","Celle-Lévescault","Savigny-Lévescault","Pouillé","Mignaloux-Beauvoir","Tercé","Cloué","Smarves","Vouneuil-sous-Biard","Fontaine-le-Comte","Coulombiers"],"Population":[" 3 233"," 1 757","   851","   548"," 4 704","   169"," 1 273"," 2 104"," 2 198"," 3 630"," 1 180","   254"," 2 181"," 1 778","   410"," 1 054"," 2 468"," 7 049"," 2 747","   606","   705","   561"," 2 660"," 1 729"," 1 469"," 3 349","88 291"," 1 751"," 6 071","31 840","10 023"," 5 911"," 2 649"," 3 035"," 7 530"," 7 233","   804"," 4 168"," 1 258"," 1 356"," 1 168","   657"," 4 577"," 1 116","   496"," 2 810"," 5 896"," 3 853"," 1 164"],"Taux d'habitants en zone inondable en %":[" 2.7"," 0.0"," 0.0"," 8.7"," 6.5"," 0.0"," 0.0","19.1"," 2.4"," 0.0"," 0.0"," 6.9"," 0.0"," 7.6"," 7.8"," 0.0"," 0.0","10.1","17.8"," 0.0"," 1.6"," 0.0"," 0.0","11.8"," 0.5"," 4.4"," 2.7"," 0.2"," 4.7"," 3.5"," 0.9"," 8.0"," 0.6"," 2.2"," 5.5"," 3.3"," 4.6"," 0.0"," 0.0"," 1.2"," 0.0"," 0.0"," 0.0"," 0.0"," 1.0"," 2.1"," 0.3"," 0.0"," 0.0"],"Nombre d'habitants en zone inondable":["   88","    0","    0","   48","  305","    0","    0","  402","   54","    0","    0","   17","    0","  136","   32","    0","    0","  714","  489","    0","   11","    0","    0","  204","    8","  146","2 337","    4","  286","1 107","   89","  472","   16","   66","  413","  235","   37","    2","    0","   17","    0","    0","    0","    0","    5","   59","   18","    0","    0"]},"columns":[{"id":"Code INSEE","name":"Code INSEE","type":"character"},{"id":"Commune","name":"Commune","type":"character"},{"id":"Population","name":"Population","type":"character"},{"id":"Taux d'habitants en zone inondable en %","name":"Taux d'habitants en zone inondable en %","type":"character"},{"id":"Nombre d'habitants en zone inondable","name":"Nombre d'habitants en zone inondable","type":"character"}],"resizable":true,"filterable":true,"defaultPageSize":10,"highlight":true,"striped":true,"theme":{"borderColor":"#E0E0E0","stripedColor":"#f5f5f5","highlightColor":"#7591e5","cellPadding":"8px 12px","style":{"fontSize":"14px","fontFamily":"sans-serif"}},"dataKey":"f56df83301dab6ad4e5368d16eb44dfa"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div></div><div class="tab-pane html-fill-item html-fill-container" role="tabpanel" id="card-tabset-2-3"><div class="card-body html-fill-item html-fill-container" data-title="Graphiques">
<div class="flow bslib-grid" data-layout="flow" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr) minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container" style="padding: 5px;">
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb5" data-startfrom="582" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 581;"><span id="cb5-582"><a href="#cb5-582" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Plot <span class="im">as</span> PlotTaux } <span class="im">from</span> <span class="st">"@observablehq/plot"</span><span class="op">;</span></span>
<span id="cb5-583"><a href="#cb5-583" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Inputs <span class="im">as</span> InputsTaux } <span class="im">from</span> <span class="st">"@observablehq/inputs"</span><span class="op">;</span></span>
<span id="cb5-584"><a href="#cb5-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-585"><a href="#cb5-585" aria-hidden="true" tabindex="-1"></a><span class="co">// Charger les données</span></span>
<span id="cb5-586"><a href="#cb5-586" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/data_s31atx.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb5-587"><a href="#cb5-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-588"><a href="#cb5-588" aria-hidden="true" tabindex="-1"></a><span class="co">// Label du slider</span></span>
<span id="cb5-589"><a href="#cb5-589" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;label for="slider-s31atx" style="display: block;</span></span>
<span id="cb5-590"><a href="#cb5-590" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-top: 1em;</span></span>
<span id="cb5-591"><a href="#cb5-591" aria-hidden="true" tabindex="-1"></a><span class="vs">  font-weight: bold;</span></span>
<span id="cb5-592"><a href="#cb5-592" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-bottom: 1em;</span></span>
<span id="cb5-593"><a href="#cb5-593" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: 1px solid rgba(0, 0, 0, 0.6);</span></span>
<span id="cb5-594"><a href="#cb5-594" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-shadow: 0px 0px 8px 0px rgba(0, 0, 0, 0.8);</span></span>
<span id="cb5-595"><a href="#cb5-595" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 8px;</span></span>
<span id="cb5-596"><a href="#cb5-596" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 5px;</span></span>
<span id="cb5-597"><a href="#cb5-597" aria-hidden="true" tabindex="-1"></a><span class="vs">  text-align: center;</span></span>
<span id="cb5-598"><a href="#cb5-598" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-right: 20%;</span></span>
<span id="cb5-599"><a href="#cb5-599" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-left: 20%;"&gt;</span></span>
<span id="cb5-600"><a href="#cb5-600" aria-hidden="true" tabindex="-1"></a><span class="vs">  Taux d'habitants en zone inondable en %</span></span>
<span id="cb5-601"><a href="#cb5-601" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/label&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-1" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-2" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-3" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-4" data-nodetype="expression" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb6" data-startfrom="606" data-source-offset="-592"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 605;"><span id="cb6-606"><a href="#cb6-606" aria-hidden="true" tabindex="-1"></a>data_s31atx <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/data_s31atx.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb6-607"><a href="#cb6-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-608"><a href="#cb6-608" aria-hidden="true" tabindex="-1"></a>viewof slider_s31atx <span class="op">=</span> InputsTaux<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">20</span>]<span class="op">,</span> {</span>
<span id="cb6-609"><a href="#cb6-609" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb6-610"><a href="#cb6-610" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb6-611"><a href="#cb6-611" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Taux d'habitants en zone inondable (%)"</span></span>
<span id="cb6-612"><a href="#cb6-612" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb6-613"><a href="#cb6-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-614"><a href="#cb6-614" aria-hidden="true" tabindex="-1"></a>sorted_s31atx <span class="op">=</span> data_s31atx</span>
<span id="cb6-615"><a href="#cb6-615" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> ({ <span class="op">...</span>d<span class="op">,</span> <span class="dt">s31atx</span><span class="op">:</span> <span class="op">+</span>d<span class="op">.</span><span class="at">s31atx</span> <span class="op">||</span> <span class="dv">0</span> }))</span>
<span id="cb6-616"><a href="#cb6-616" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31atx</span> <span class="op">&lt;=</span> slider_s31atx)</span>
<span id="cb6-617"><a href="#cb6-617" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a<span class="op">.</span><span class="at">s31atx</span> <span class="op">-</span> b<span class="op">.</span><span class="at">s31atx</span>)</span>
<span id="cb6-618"><a href="#cb6-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-619"><a href="#cb6-619" aria-hidden="true" tabindex="-1"></a>PlotTaux<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb6-620"><a href="#cb6-620" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb6-621"><a href="#cb6-621" aria-hidden="true" tabindex="-1"></a>    PlotTaux<span class="op">.</span><span class="fu">barY</span>(sorted_s31atx<span class="op">,</span> {</span>
<span id="cb6-622"><a href="#cb6-622" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb6-623"><a href="#cb6-623" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31atx</span><span class="op">,</span></span>
<span id="cb6-624"><a href="#cb6-624" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb6-625"><a href="#cb6-625" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> val <span class="op">=</span> d<span class="op">.</span><span class="at">s31atx</span><span class="op">;</span></span>
<span id="cb6-626"><a href="#cb6-626" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">===</span> <span class="dv">0</span>) <span class="cf">return</span> <span class="st">"#cdcdcd"</span><span class="op">;</span></span>
<span id="cb6-627"><a href="#cb6-627" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">&lt;=</span> <span class="dv">1</span>) <span class="cf">return</span> <span class="st">"#fff5f0"</span><span class="op">;</span></span>
<span id="cb6-628"><a href="#cb6-628" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">&lt;</span> <span class="dv">4</span>) <span class="cf">return</span> <span class="st">"#fca487"</span><span class="op">;</span></span>
<span id="cb6-629"><a href="#cb6-629" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">&lt;</span> <span class="dv">10</span>) <span class="cf">return</span> <span class="st">"#eb362a"</span><span class="op">;</span></span>
<span id="cb6-630"><a href="#cb6-630" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"#67000d"</span><span class="op">;</span></span>
<span id="cb6-631"><a href="#cb6-631" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb6-632"><a href="#cb6-632" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb6-633"><a href="#cb6-633" aria-hidden="true" tabindex="-1"></a>    PlotTaux<span class="op">.</span><span class="fu">text</span>(sorted_s31atx<span class="op">,</span> {</span>
<span id="cb6-634"><a href="#cb6-634" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb6-635"><a href="#cb6-635" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31atx</span><span class="op">,</span></span>
<span id="cb6-636"><a href="#cb6-636" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31atx</span><span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr-FR"</span>)<span class="op">,</span></span>
<span id="cb6-637"><a href="#cb6-637" aria-hidden="true" tabindex="-1"></a>      <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">8</span><span class="op">,</span></span>
<span id="cb6-638"><a href="#cb6-638" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">9</span><span class="op">,</span></span>
<span id="cb6-639"><a href="#cb6-639" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb6-640"><a href="#cb6-640" aria-hidden="true" tabindex="-1"></a>      <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"middle"</span></span>
<span id="cb6-641"><a href="#cb6-641" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb6-642"><a href="#cb6-642" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb6-643"><a href="#cb6-643" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb6-644"><a href="#cb6-644" aria-hidden="true" tabindex="-1"></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-645"><a href="#cb6-645" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Taux (%)"</span><span class="op">,</span></span>
<span id="cb6-646"><a href="#cb6-646" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>sorted_s31atx<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31atx</span>))]<span class="op">,</span></span>
<span id="cb6-647"><a href="#cb6-647" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr-FR"</span><span class="op">,</span> { <span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span> })</span>
<span id="cb6-648"><a href="#cb6-648" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-649"><a href="#cb6-649" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb6-650"><a href="#cb6-650" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Commune"</span><span class="op">,</span></span>
<span id="cb6-651"><a href="#cb6-651" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="op">-</span><span class="dv">45</span><span class="op">,</span></span>
<span id="cb6-652"><a href="#cb6-652" aria-hidden="true" tabindex="-1"></a>    <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"right"</span></span>
<span id="cb6-653"><a href="#cb6-653" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-654"><a href="#cb6-654" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb6-655"><a href="#cb6-655" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"11px"</span><span class="op">,</span></span>
<span id="cb6-656"><a href="#cb6-656" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontFamily</span><span class="op">:</span> <span class="st">"sans-serif"</span><span class="op">,</span></span>
<span id="cb6-657"><a href="#cb6-657" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span></span>
<span id="cb6-658"><a href="#cb6-658" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb6-659"><a href="#cb6-659" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerWidth</span> <span class="op">*</span> <span class="fl">0.95</span><span class="op">,</span></span>
<span id="cb6-660"><a href="#cb6-660" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span> <span class="op">*</span> <span class="fl">0.65</span><span class="op">,</span></span>
<span id="cb6-661"><a href="#cb6-661" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">120</span><span class="op">,</span></span>
<span id="cb6-662"><a href="#cb6-662" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb6-663"><a href="#cb6-663" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span></span>
<span id="cb6-664"><a href="#cb6-664" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-5" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-6" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-7" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-5-8" data-nodetype="expression" class="html-fill-item html-fill-container">

</div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container" style="padding: 5px;">
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb7" data-startfrom="672" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 671;"><span id="cb7-672"><a href="#cb7-672" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Plot <span class="im">as</span> PlotPop } <span class="im">from</span> <span class="st">"@observablehq/plot"</span><span class="op">;</span></span>
<span id="cb7-673"><a href="#cb7-673" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Inputs <span class="im">as</span> InputsPop} <span class="im">from</span> <span class="st">"@observablehq/inputs"</span><span class="op">;</span></span>
<span id="cb7-674"><a href="#cb7-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-675"><a href="#cb7-675" aria-hidden="true" tabindex="-1"></a><span class="co">// Charger les données</span></span>
<span id="cb7-676"><a href="#cb7-676" aria-hidden="true" tabindex="-1"></a>data_s31apop <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/data_s31apop.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb7-677"><a href="#cb7-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-678"><a href="#cb7-678" aria-hidden="true" tabindex="-1"></a><span class="co">// Label du slider</span></span>
<span id="cb7-679"><a href="#cb7-679" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;label for="slider-s31apop" style="display: block;</span></span>
<span id="cb7-680"><a href="#cb7-680" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-top: 1em;</span></span>
<span id="cb7-681"><a href="#cb7-681" aria-hidden="true" tabindex="-1"></a><span class="vs">  font-weight: bold;</span></span>
<span id="cb7-682"><a href="#cb7-682" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-bottom: 1em;</span></span>
<span id="cb7-683"><a href="#cb7-683" aria-hidden="true" tabindex="-1"></a><span class="vs">  border: 1px solid rgba(0, 0, 0, 0.6);</span></span>
<span id="cb7-684"><a href="#cb7-684" aria-hidden="true" tabindex="-1"></a><span class="vs">  box-shadow: 0px 0px 8px 0px rgba(0, 0, 0, 0.8);</span></span>
<span id="cb7-685"><a href="#cb7-685" aria-hidden="true" tabindex="-1"></a><span class="vs">  border-radius: 8px;</span></span>
<span id="cb7-686"><a href="#cb7-686" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 5px;</span></span>
<span id="cb7-687"><a href="#cb7-687" aria-hidden="true" tabindex="-1"></a><span class="vs">  text-align: center;</span></span>
<span id="cb7-688"><a href="#cb7-688" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-right: 20%;</span></span>
<span id="cb7-689"><a href="#cb7-689" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-left: 20%;"&gt;</span></span>
<span id="cb7-690"><a href="#cb7-690" aria-hidden="true" tabindex="-1"></a><span class="vs">  Nombre d'habitants en zone inondable</span></span>
<span id="cb7-691"><a href="#cb7-691" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/label&gt;`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-1" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-2" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-3" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-4" data-nodetype="expression" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb8" data-startfrom="696" data-source-offset="-596"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 695;"><span id="cb8-696"><a href="#cb8-696" aria-hidden="true" tabindex="-1"></a>viewof slider_s31apop <span class="op">=</span> InputsPop<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1200</span>]<span class="op">,</span> {</span>
<span id="cb8-697"><a href="#cb8-697" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb8-698"><a href="#cb8-698" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span></span>
<span id="cb8-699"><a href="#cb8-699" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Nombre d'habitants en zone inondable"</span></span>
<span id="cb8-700"><a href="#cb8-700" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb8-701"><a href="#cb8-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-702"><a href="#cb8-702" aria-hidden="true" tabindex="-1"></a>sorted_s31apop <span class="op">=</span> data_s31apop</span>
<span id="cb8-703"><a href="#cb8-703" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> ({ <span class="op">...</span>d<span class="op">,</span> <span class="dt">s31apop</span><span class="op">:</span> <span class="op">+</span>d<span class="op">.</span><span class="at">s31apop</span> <span class="op">||</span> <span class="dv">0</span> }))</span>
<span id="cb8-704"><a href="#cb8-704" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31apop</span> <span class="op">&lt;=</span> slider_s31apop)</span>
<span id="cb8-705"><a href="#cb8-705" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a<span class="op">.</span><span class="at">s31apop</span> <span class="op">-</span> b<span class="op">.</span><span class="at">s31apop</span>)</span>
<span id="cb8-706"><a href="#cb8-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-707"><a href="#cb8-707" aria-hidden="true" tabindex="-1"></a>PlotTaux<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb8-708"><a href="#cb8-708" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb8-709"><a href="#cb8-709" aria-hidden="true" tabindex="-1"></a>    PlotTaux<span class="op">.</span><span class="fu">barY</span>(sorted_s31apop<span class="op">,</span> {</span>
<span id="cb8-710"><a href="#cb8-710" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb8-711"><a href="#cb8-711" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31apop</span><span class="op">,</span></span>
<span id="cb8-712"><a href="#cb8-712" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> {</span>
<span id="cb8-713"><a href="#cb8-713" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> val <span class="op">=</span> d<span class="op">.</span><span class="at">s31apop</span><span class="op">;</span></span>
<span id="cb8-714"><a href="#cb8-714" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">===</span> <span class="dv">0</span>) <span class="cf">return</span> <span class="st">"#cdcdcd"</span><span class="op">;</span></span>
<span id="cb8-715"><a href="#cb8-715" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">&lt;</span> <span class="dv">600</span>) <span class="cf">return</span> <span class="st">"#fca487"</span><span class="op">;</span></span>
<span id="cb8-716"><a href="#cb8-716" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (val <span class="op">&lt;</span> <span class="dv">1000</span>) <span class="cf">return</span> <span class="st">"#eb362a"</span><span class="op">;</span></span>
<span id="cb8-717"><a href="#cb8-717" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"#67000d"</span><span class="op">;</span></span>
<span id="cb8-718"><a href="#cb8-718" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb8-719"><a href="#cb8-719" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb8-720"><a href="#cb8-720" aria-hidden="true" tabindex="-1"></a>    PlotTaux<span class="op">.</span><span class="fu">text</span>(sorted_s31apop<span class="op">,</span> {</span>
<span id="cb8-721"><a href="#cb8-721" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">nom</span><span class="op">,</span></span>
<span id="cb8-722"><a href="#cb8-722" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31apop</span><span class="op">,</span></span>
<span id="cb8-723"><a href="#cb8-723" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31apop</span><span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr-FR"</span>)<span class="op">,</span></span>
<span id="cb8-724"><a href="#cb8-724" aria-hidden="true" tabindex="-1"></a>      <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">8</span><span class="op">,</span></span>
<span id="cb8-725"><a href="#cb8-725" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">9</span><span class="op">,</span></span>
<span id="cb8-726"><a href="#cb8-726" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb8-727"><a href="#cb8-727" aria-hidden="true" tabindex="-1"></a>      <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"middle"</span></span>
<span id="cb8-728"><a href="#cb8-728" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-729"><a href="#cb8-729" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb8-730"><a href="#cb8-730" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb8-731"><a href="#cb8-731" aria-hidden="true" tabindex="-1"></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb8-732"><a href="#cb8-732" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Nombre d'habitants"</span><span class="op">,</span></span>
<span id="cb8-733"><a href="#cb8-733" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>sorted_s31apop<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">s31apop</span>))]<span class="op">,</span></span>
<span id="cb8-734"><a href="#cb8-734" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickFormat</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">toLocaleString</span>(<span class="st">"fr-FR"</span><span class="op">,</span> { <span class="dt">maximumFractionDigits</span><span class="op">:</span> <span class="dv">0</span> })</span>
<span id="cb8-735"><a href="#cb8-735" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-736"><a href="#cb8-736" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb8-737"><a href="#cb8-737" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Commune"</span><span class="op">,</span></span>
<span id="cb8-738"><a href="#cb8-738" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tickRotate</span><span class="op">:</span> <span class="op">-</span><span class="dv">45</span><span class="op">,</span></span>
<span id="cb8-739"><a href="#cb8-739" aria-hidden="true" tabindex="-1"></a>    <span class="dt">labelAnchor</span><span class="op">:</span> <span class="st">"right"</span></span>
<span id="cb8-740"><a href="#cb8-740" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-741"><a href="#cb8-741" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> {</span>
<span id="cb8-742"><a href="#cb8-742" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"11px"</span><span class="op">,</span></span>
<span id="cb8-743"><a href="#cb8-743" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontFamily</span><span class="op">:</span> <span class="st">"sans-serif"</span><span class="op">,</span></span>
<span id="cb8-744"><a href="#cb8-744" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span></span>
<span id="cb8-745"><a href="#cb8-745" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb8-746"><a href="#cb8-746" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerWidth</span> <span class="op">*</span> <span class="fl">0.95</span><span class="op">,</span></span>
<span id="cb8-747"><a href="#cb8-747" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span> <span class="op">*</span> <span class="fl">0.65</span><span class="op">,</span></span>
<span id="cb8-748"><a href="#cb8-748" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">120</span><span class="op">,</span></span>
<span id="cb8-749"><a href="#cb8-749" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span></span>
<span id="cb8-750"><a href="#cb8-750" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">80</span></span>
<span id="cb8-751"><a href="#cb8-751" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-5" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-6" data-nodetype="declaration" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div class="html-fill-item html-fill-container">
<div id="ojs-cell-6-7" data-nodetype="expression" class="html-fill-item html-fill-container">

</div>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div></div></div><bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div><div id="informations-relatives-à-lindicateur" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="columns" aria-labelledby="tab-informations-relatives-à-lindicateur">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-bslib-card-init="" data-require-bs-caller="card()">
<div class="card-body html-fill-item html-fill-container" style="padding: 5px;">
<div class="sourceCode cell-code hidden html-fill-item html-fill-container" id="cb9" data-startfrom="759" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 758;"><span id="cb9-759"><a href="#cb9-759" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span></span>
<span id="cb9-760"><a href="#cb9-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-761"><a href="#cb9-761" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;table style="width:90%; border-collapse: collapse; border:1px solid; text-align:center; margin:auto;"&gt;</span></span>
<span id="cb9-762"><a href="#cb9-762" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;colgroup&gt;</span></span>
<span id="cb9-763"><a href="#cb9-763" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-764"><a href="#cb9-764" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-765"><a href="#cb9-765" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-766"><a href="#cb9-766" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-767"><a href="#cb9-767" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-768"><a href="#cb9-768" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/colgroup&gt;</span></span>
<span id="cb9-769"><a href="#cb9-769" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-770"><a href="#cb9-770" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;" colspan="2"&gt;Numéro d'indicateur&lt;/th&gt;</span></span>
<span id="cb9-771"><a href="#cb9-771" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="border:1px solid;"&gt;Ind2/7a&lt;/th&gt;</span></span>
<span id="cb9-772"><a href="#cb9-772" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;"&gt;Date de mise à jour&lt;/th&gt;</span></span>
<span id="cb9-773"><a href="#cb9-773" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="border:1px solid;"&gt;31/05/2025&lt;/th&gt;</span></span>
<span id="cb9-774"><a href="#cb9-774" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-775"><a href="#cb9-775" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-776"><a href="#cb9-776" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Intitulé&lt;/td&gt;</span></span>
<span id="cb9-777"><a href="#cb9-777" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Dommages aux entreprises en fonction de paramètres hydrauliques&lt;/td&gt;</span></span>
<span id="cb9-778"><a href="#cb9-778" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-779"><a href="#cb9-779" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-780"><a href="#cb9-780" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Objectif de la SNGRI&lt;/td&gt;</span></span>
<span id="cb9-781"><a href="#cb9-781" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Objectif n°2 : Stabiliser à court terme et réduire à moyen terme le coût des dommages liés à l’inondation&lt;/td&gt;</span></span>
<span id="cb9-782"><a href="#cb9-782" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-783"><a href="#cb9-783" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-784"><a href="#cb9-784" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Axe de vulnérabilité&lt;/td&gt;</span></span>
<span id="cb9-785"><a href="#cb9-785" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Axe 2/3 Les dommages aux activités et aux biens&lt;/td&gt;</span></span>
<span id="cb9-786"><a href="#cb9-786" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-787"><a href="#cb9-787" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-788"><a href="#cb9-788" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Source de vulnérabilité&lt;/td&gt;</span></span>
<span id="cb9-789"><a href="#cb9-789" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;S2/7 Inondation des bâtiments, du mobilier et des stocks, et pertes d’activité des entreprises&lt;/td&gt;</span></span>
<span id="cb9-790"><a href="#cb9-790" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-791"><a href="#cb9-791" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/table&gt;</span></span>
<span id="cb9-792"><a href="#cb9-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-793"><a href="#cb9-793" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;br&gt;</span></span>
<span id="cb9-794"><a href="#cb9-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-795"><a href="#cb9-795" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;table style="width:90%; border-collapse: collapse; border:1px solid; text-align:center; margin:auto;"&gt;</span></span>
<span id="cb9-796"><a href="#cb9-796" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;colgroup&gt;</span></span>
<span id="cb9-797"><a href="#cb9-797" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-798"><a href="#cb9-798" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-799"><a href="#cb9-799" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-800"><a href="#cb9-800" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-801"><a href="#cb9-801" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:20%;"&gt;</span></span>
<span id="cb9-802"><a href="#cb9-802" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/colgroup&gt;</span></span>
<span id="cb9-803"><a href="#cb9-803" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-804"><a href="#cb9-804" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Modalités du calcul&lt;/td&gt;</span></span>
<span id="cb9-805"><a href="#cb9-805" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Application de la méthode du référentiel national.</span></span>
<span id="cb9-806"><a href="#cb9-806" aria-hidden="true" tabindex="-1"></a><span class="vs">    On utilise le tableau du guide AMC sur les dommages aux entreprises (pour l’aléa fluvial), qui</span></span>
<span id="cb9-807"><a href="#cb9-807" aria-hidden="true" tabindex="-1"></a><span class="vs">    dépendent du type d’activité de l’entreprise (code NACE), de la durée et de la hauteur de</span></span>
<span id="cb9-808"><a href="#cb9-808" aria-hidden="true" tabindex="-1"></a><span class="vs">    submersion. On considère que la durée de submersion est supérieure à 48 h dans tous les cas.</span></span>
<span id="cb9-809"><a href="#cb9-809" aria-hidden="true" tabindex="-1"></a><span class="vs">    Les points Geo-Siren ont été affectés aux bâtiments de la BDTOPO, soit directement si le point se</span></span>
<span id="cb9-810"><a href="#cb9-810" aria-hidden="true" tabindex="-1"></a><span class="vs">    trouve dans le bâtiment, soit au bâtiment dans la parcelle la plus proche.</span></span>
<span id="cb9-811"><a href="#cb9-811" aria-hidden="true" tabindex="-1"></a><span class="vs">    La couche des bâtiments (type ACTIVITE) est croisée avec la zone inondable contenant</span></span>
<span id="cb9-812"><a href="#cb9-812" aria-hidden="true" tabindex="-1"></a><span class="vs">    l’information de hauteur d’eau.&lt;/td&gt;</span></span>
<span id="cb9-813"><a href="#cb9-813" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-814"><a href="#cb9-814" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-815"><a href="#cb9-815" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Échelle de représentation&lt;/td&gt;</span></span>
<span id="cb9-816"><a href="#cb9-816" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Communale&lt;/td&gt;</span></span>
<span id="cb9-817"><a href="#cb9-817" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-818"><a href="#cb9-818" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-819"><a href="#cb9-819" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Points de vigilance&lt;/td&gt;</span></span>
<span id="cb9-820"><a href="#cb9-820" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Les points de la base geo-siren ont différents niveaux de précision, qui vont du             numéro du bâtiment, à la rue et au centre de la commune. Seuls les points géocodés au bâtiments ont été</span></span>
<span id="cb9-821"><a href="#cb9-821" aria-hidden="true" tabindex="-1"></a><span class="vs">    pris en compte. Cela représente plus de 80% des points sur la zone d’étude.</span></span>
<span id="cb9-822"><a href="#cb9-822" aria-hidden="true" tabindex="-1"></a><span class="vs">    Le calcul du coût des dommages aux entreprises dépend de la surface du bâtiment, de la hauteur</span></span>
<span id="cb9-823"><a href="#cb9-823" aria-hidden="true" tabindex="-1"></a><span class="vs">    d'eau, de la durée de submersion et du type d'activité. La perte d'activité n'est pas considérée</span></span>
<span id="cb9-824"><a href="#cb9-824" aria-hidden="true" tabindex="-1"></a><span class="vs">    dans l'estimation du coût.&lt;/td&gt;</span></span>
<span id="cb9-825"><a href="#cb9-825" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-826"><a href="#cb9-826" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-827"><a href="#cb9-827" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Table cible&lt;/td&gt;</span></span>
<span id="cb9-828"><a href="#cb9-828" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;p_obj2_cout_dommages.s31atx_dommages_entreprises&lt;/td&gt;</span></span>
<span id="cb9-829"><a href="#cb9-829" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-830"><a href="#cb9-830" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-831"><a href="#cb9-831" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-832"><a href="#cb9-832" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Variables mobilisées&lt;/td&gt;</span></span>
<span id="cb9-833"><a href="#cb9-833" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;Zx : zone inondable, Zf : durée de submersion, Oc3 : activité&lt;/td&gt;</span></span>
<span id="cb9-834"><a href="#cb9-834" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-835"><a href="#cb9-835" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-836"><a href="#cb9-836" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-837"><a href="#cb9-837" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Indicateur commun SLGRI Vienne/Clain&lt;/td&gt;</span></span>
<span id="cb9-838"><a href="#cb9-838" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="3" style="border:1px solid;"&gt;non&lt;/td&gt;</span></span>
<span id="cb9-839"><a href="#cb9-839" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-840"><a href="#cb9-840" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-841"><a href="#cb9-841" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/table&gt;</span></span>
<span id="cb9-842"><a href="#cb9-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-843"><a href="#cb9-843" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;br&gt;</span></span>
<span id="cb9-844"><a href="#cb9-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-845"><a href="#cb9-845" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;table style="width:90%; border-collapse: collapse; border:1px solid; text-align:center; margin:auto;"&gt;</span></span>
<span id="cb9-846"><a href="#cb9-846" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;colgroup&gt;</span></span>
<span id="cb9-847"><a href="#cb9-847" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-848"><a href="#cb9-848" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-849"><a href="#cb9-849" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-850"><a href="#cb9-850" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-851"><a href="#cb9-851" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-852"><a href="#cb9-852" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-853"><a href="#cb9-853" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-854"><a href="#cb9-854" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-855"><a href="#cb9-855" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-856"><a href="#cb9-856" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;col style="width:10%;"&gt;</span></span>
<span id="cb9-857"><a href="#cb9-857" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/colgroup&gt;</span></span>
<span id="cb9-858"><a href="#cb9-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-859"><a href="#cb9-859" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-860"><a href="#cb9-860" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="10" style="background-color:#c4e3ff; border:1px solid; font-weight: bold;"&gt;Données sources&lt;/td&gt;</span></span>
<span id="cb9-861"><a href="#cb9-861" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-862"><a href="#cb9-862" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-863"><a href="#cb9-863" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;" colspan="2"&gt;Désignation&lt;/th&gt;</span></span>
<span id="cb9-864"><a href="#cb9-864" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;"&gt;Millésime&lt;/th&gt;</span></span>
<span id="cb9-865"><a href="#cb9-865" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;"&gt;Nationale/locale&lt;/th&gt;</span></span>
<span id="cb9-866"><a href="#cb9-866" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;"&gt;Format&lt;/th&gt;</span></span>
<span id="cb9-867"><a href="#cb9-867" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;"&gt;Type&lt;/th&gt;</span></span>
<span id="cb9-868"><a href="#cb9-868" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;" colspan="2"&gt;Producteur&lt;/th&gt;</span></span>
<span id="cb9-869"><a href="#cb9-869" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;th style="background-color:#c4e3ff; border:1px solid;" colspan="2"&gt;Nom fichier&lt;/th&gt;</span></span>
<span id="cb9-870"><a href="#cb9-870" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-871"><a href="#cb9-871" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-872"><a href="#cb9-872" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Zone inondable&lt;/td&gt;</span></span>
<span id="cb9-873"><a href="#cb9-873" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;2019&lt;/td&gt;</span></span>
<span id="cb9-874"><a href="#cb9-874" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Locale&lt;/td&gt;</span></span>
<span id="cb9-875"><a href="#cb9-875" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Shape&lt;/td&gt;</span></span>
<span id="cb9-876"><a href="#cb9-876" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Polygone&lt;/td&gt;</span></span>
<span id="cb9-877"><a href="#cb9-877" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Cerema&lt;/td&gt;</span></span>
<span id="cb9-878"><a href="#cb9-878" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Zx_zone_inondable.shp&lt;/td&gt;</span></span>
<span id="cb9-879"><a href="#cb9-879" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-880"><a href="#cb9-880" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-881"><a href="#cb9-881" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Hauteurs d’eau par pas de 10 cm&lt;/td&gt;</span></span>
<span id="cb9-882"><a href="#cb9-882" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;2019&lt;/td&gt;</span></span>
<span id="cb9-883"><a href="#cb9-883" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Locale&lt;/td&gt;</span></span>
<span id="cb9-884"><a href="#cb9-884" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Shape&lt;/td&gt;</span></span>
<span id="cb9-885"><a href="#cb9-885" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Polygone&lt;/td&gt;</span></span>
<span id="cb9-886"><a href="#cb9-886" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Cerema&lt;/td&gt;</span></span>
<span id="cb9-887"><a href="#cb9-887" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;hauteur_pas_10cm.shp&lt;/td&gt;</span></span>
<span id="cb9-888"><a href="#cb9-888" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-889"><a href="#cb9-889" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-890"><a href="#cb9-890" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Base geo-siren des entreprises&lt;/td&gt;</span></span>
<span id="cb9-891"><a href="#cb9-891" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;2021&lt;/td&gt;</span></span>
<span id="cb9-892"><a href="#cb9-892" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Nationale&lt;/td&gt;</span></span>
<span id="cb9-893"><a href="#cb9-893" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Shape&lt;/td&gt;</span></span>
<span id="cb9-894"><a href="#cb9-894" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Point&lt;/td&gt;</span></span>
<span id="cb9-895"><a href="#cb9-895" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;INSEE&lt;/td&gt;</span></span>
<span id="cb9-896"><a href="#cb9-896" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;geo_siret.shp&lt;/td&gt;</span></span>
<span id="cb9-897"><a href="#cb9-897" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-898"><a href="#cb9-898" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-899"><a href="#cb9-899" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Fonction de dommages aux entreprises du guide AMC&lt;/td&gt;</span></span>
<span id="cb9-900"><a href="#cb9-900" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;2016&lt;/td&gt;</span></span>
<span id="cb9-901"><a href="#cb9-901" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Nationale&lt;/td&gt;</span></span>
<span id="cb9-902"><a href="#cb9-902" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Csv&lt;/td&gt;</span></span>
<span id="cb9-903"><a href="#cb9-903" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Tableau&lt;/td&gt;</span></span>
<span id="cb9-904"><a href="#cb9-904" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;CGDD&lt;/td&gt;</span></span>
<span id="cb9-905"><a href="#cb9-905" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;amc_dommages_fluvial_entreprise&lt;/td&gt;</span></span>
<span id="cb9-906"><a href="#cb9-906" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-907"><a href="#cb9-907" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;tr&gt;</span></span>
<span id="cb9-908"><a href="#cb9-908" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Communes (BDTOPO)&lt;/td&gt;</span></span>
<span id="cb9-909"><a href="#cb9-909" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;2020&lt;/td&gt;</span></span>
<span id="cb9-910"><a href="#cb9-910" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Nationale&lt;/td&gt;</span></span>
<span id="cb9-911"><a href="#cb9-911" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Shape&lt;/td&gt;</span></span>
<span id="cb9-912"><a href="#cb9-912" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td style="border:1px solid;"&gt;Polygone&lt;/td&gt;</span></span>
<span id="cb9-913"><a href="#cb9-913" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;IGN&lt;/td&gt;</span></span>
<span id="cb9-914"><a href="#cb9-914" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;td colspan="2" style="border:1px solid;"&gt;Commune.shp&lt;/td&gt;</span></span>
<span id="cb9-915"><a href="#cb9-915" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/tr&gt;</span></span>
<span id="cb9-916"><a href="#cb9-916" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/table&gt;</span></span>
<span id="cb9-917"><a href="#cb9-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-918"><a href="#cb9-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-919"><a href="#cb9-919" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display html-fill-item html-fill-container">
<div id="ojs-cell-7" data-nodetype="expression" class="html-fill-item html-fill-container">

</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div><div id="3ade8a4a-fb1d-4a6c-8409-ac45482d5fc9" class="hidden html-fill-item html-fill-container">

</div>
</div>
</div>
</div>
</div></div><aside id="bslib-sidebar-1" class="sidebar html-fill-container html-fill-item"><div class="html-fill-container html-fill-item">
<div id="nav-menu-objectif-n°3"></div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="33" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 32;"><span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>bbox_sru <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"layers/bb.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div style="color:#dc7633; text-align:inherit !important; font-size:1.3em; font-weight:bold; font-family: calibri;margin-bottom:10%;">
 Nombre et proportion d’habitants en zone inondable
 </div>

<div style="text-align:inherit !important; font-size:1.1em; font-family: calibri;margin-bottom:10%;"> Une première approche de la capacité d’un territoire à «revenir à la normale», c’est-à-dire à un état stable où les fonctions précédentes (habitat, activité, services publics, transports …) sont restaurées sans être nécessairement identiques, consiste à évaluer les habitants touchés directement par l’événement, et leur proportion au sein du «territoire de vie». </div>


<a href="https://fiches.eptb-vienne.fr/ind_27a.pdf" target="_blank"><i class="fa fa-exclamation-circle"></i> Télécharger la fiche indicateur et la carte</a> 


<div style="width: auto; padding:5px; border: 1px solid #A0A0A0; border-radius:15px; text-align: center !important; background: #F2F2F2; font-size:1.1em;margin-top:10%;">
La zone inondable correspond à l'aléa centennal construit à partir des données disponibles et notamment réglementaires mais en aucun cas ne se substitue aux documents réglementaires en vigueur.
</div>
</div></aside>
<button class="collapse-toggle" type="button" title="Toggle sidebar" aria-expanded="true" aria-controls="bslib-sidebar-1">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16" class="bi bi-chevron-left collapse-icon" style="fill:currentColor;" aria-hidden="true" role="img">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path>
    </svg>
</button>
<script data-bslib-sidebar-init="">
bslib.Sidebar.initCollapsibleAll()
</script>
</div>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImJib3hfc3J1ID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvYmIuanNvblwiKS5qc29uKClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuYmFzc2luX3ZpZW5uZSA9IEZpbGVBdHRhY2htZW50KFwibGF5ZXJzL2Jhc3Npbl92aWVubmUuZ2VvanNvblwiKS5qc29uKCk7XG5kZXBhcnRlbWVudCA9IEZpbGVBdHRhY2htZW50KFwibGF5ZXJzL2RlcGFydGVtZW50Lmdlb2pzb25cIikuanNvbigpO1xucmVnaW9uID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvcmVnaW9uLmdlb2pzb25cIikuanNvbigpO1xuZXBjaSA9IEZpbGVBdHRhY2htZW50KFwibGF5ZXJzL2VwY2kuZ2VvanNvblwiKS5qc29uKCk7XG5wZXJpbWV0cmUgPSBGaWxlQXR0YWNobWVudChcImxheWVycy9wZXJpbWV0cmUuanNvblwiKS5qc29uKCk7XG5zbGdyaSA9IEZpbGVBdHRhY2htZW50KFwibGF5ZXJzL3NsZ3JpLmpzb25cIikuanNvbigpO1xudHJpID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvdHJpLmpzb25cIikuanNvbigpO1xuem9uZV9pbm9uZGFibGUgPSBGaWxlQXR0YWNobWVudChcImxheWVycy96b25lX2lub25kYWJsZS5nZW9qc29uXCIpLmpzb24oKTtcbmluZGljYXRldXJzID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvaW5kaWNhdGV1cnMuanNvblwiKS5qc29uKCk7XG5jb3Vyc19kX2VhdSA9IEZpbGVBdHRhY2htZW50KFwibGF5ZXJzL2NvdXJzX2RfZWF1Lmdlb2pzb25cIikuanNvbigpO1xuaW5kaWNhdGV1cnNHZW9qc29uID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvaW5kaWNhdGV1cnMuZ2VvanNvblwiKS5qc29uKCk7XG5cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuXG5tYXAgPSB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGh0bWxgPGRpdiBjbGFzcz1cIm1hcC1jb250YWluZXJcIiBpZD1cIm1hcFwiIHN0eWxlPVwiaGVpZ2h0OiA2NjVweDsgd2lkdGg6IDEwMCU7XCI+PC9kaXY+YDtcbiAgeWllbGQgY29udGFpbmVyO1xuXG4gIGNvbnN0IHNvdXJjZVBsYW5JR04gPSB7XG4gICAgc3R5bGU6ICdub3JtYWwnLFxuICAgIGZvcm1hdDogJ2ltYWdlL3BuZycsXG4gICAgbGF5ZXI6ICdHRU9HUkFQSElDQUxHUklEU1lTVEVNUy5QTEFOSUdOVjInXG4gIH07XG5cbiAgY29uc3Qgc291cmNlT3J0aG8gPSB7XG4gICAgc3R5bGU6ICdub3JtYWwnLFxuICAgIGZvcm1hdDogJ2ltYWdlL2pwZWcnLFxuICAgIGxheWVyOiAnSFIuT1JUSE9JTUFHRVJZLk9SVEhPUEhPVE9TJ1xuICB9O1xuXG4gIGNvbnN0IG1hcCA9IG5ldyBtYXBsaWJyZWdsLk1hcCh7XG4gICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgc3R5bGU6ICdodHRwczovL2Jhc2VtYXBzLmNhcnRvY2RuLmNvbS9nbC92b3lhZ2VyLWdsLXN0eWxlL3N0eWxlLmpzb24nLFxuICAgIDwhLS0gY2VudGVyOiBbLTAuMDQsIDQ2LjMwNTFdLCAgLS0+XG4gICAgem9vbTogMTFcbiAgfSk7XG5cbiAgbWFwLmFkZENvbnRyb2wobmV3IG1hcGxpYnJlZ2wuRnVsbHNjcmVlbkNvbnRyb2woKSwgJ3RvcC1yaWdodCcpO1xuICBtYXAuYWRkQ29udHJvbChuZXcgbWFwbGlicmVnbC5OYXZpZ2F0aW9uQ29udHJvbCh7IHZpc3VhbGl6ZVBpdGNoOiB0cnVlIH0pLCAndG9wLWxlZnQnKTtcbiAgbWFwLmFkZENvbnRyb2wobmV3IG1hcGxpYnJlZ2wuU2NhbGVDb250cm9sKHsgbWF4V2lkdGg6IDgwLCB1bml0OiAnbWV0cmljJyB9KSk7XG4gIFxuXG4gIGNvbnN0IHRvZ2dsZVN0eWxlID0gKHVzZU9ydGhvKSA9PiB7XG4gICAgaWYgKHVzZU9ydGhvKSB7XG4gICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ29ydGhvSUdOJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KCdwbGFuSUdOJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXAuc2V0TGF5b3V0UHJvcGVydHkoJ29ydGhvSUdOJywgJ3Zpc2liaWxpdHknLCAnbm9uZScpO1xuICAgICAgbWFwLnNldExheW91dFByb3BlcnR5KCdwbGFuSUdOJywgJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xuICAgIH1cbiAgfTtcblxuICBtYXAub24oJ2xvYWQnLCAoKSA9PiB7XG4gICAgbWFwLmZpdEJvdW5kcyhcbiAgICBbXG4gICAgICBbLTAuMDQsIDQ2LjMwNTFdLCAgIC8vIFN1ZC1PdWVzdFxuICAgICAgWzAuNzc0MSwgNDYuODU2NV0gICAvLyBOb3JkLUVzdFxuICAgIF0sXG4gICAge1xuICAgICAgcGFkZGluZzogMjAsXG4gICAgICBsaW5lYXI6IHRydWUsXG4gICAgICBkdXJhdGlvbjogMFxuICAgIH1cbiAgKTtcbiAgICAvLyBBam91dCBkZXMgZm9uZHMgcmFzdGVyIElHTlxuICAgIG1hcC5hZGRTb3VyY2UoJ3Jhc3Rlci1wbGFuaWduJywge1xuICAgICAgdHlwZTogJ3Jhc3RlcicsXG4gICAgICB0aWxlczogW1xuICAgICAgICBgaHR0cHM6Ly9kYXRhLmdlb3BmLmZyL3dtdHM/U0VSVklDRT1XTVRTJnN0eWxlPSR7c291cmNlUGxhbklHTi5zdHlsZX0mVkVSU0lPTj0xLjAuMCZSRVFVRVNUPUdldFRpbGUmZm9ybWF0PSR7c291cmNlUGxhbklHTi5mb3JtYXR9JmxheWVyPSR7c291cmNlUGxhbklHTi5sYXllcn0mdGlsZW1hdHJpeHNldD1QTSZUaWxlTWF0cml4PXt6fSZUaWxlQ29sPXt4fSZUaWxlUm93PXt5fWBcbiAgICAgIF0sXG4gICAgICB0aWxlU2l6ZTogMjU2LFxuICAgICAgYXR0cmlidXRpb246ICfCqSA8YSBocmVmPVwiaHR0cHM6Ly93d3cuaWduLmZyL1wiPklHTjwvYT4nLFxuICAgICAgbWluem9vbTogMCxcbiAgICAgIG1heHpvb206IDIyXG4gICAgfSk7XG5cbiAgICBtYXAuYWRkU291cmNlKCdyYXN0ZXItb3J0aG8nLCB7XG4gICAgICB0eXBlOiAncmFzdGVyJyxcbiAgICAgIHRpbGVzOiBbXG4gICAgICAgIGBodHRwczovL2RhdGEuZ2VvcGYuZnIvd210cz9TRVJWSUNFPVdNVFMmc3R5bGU9JHtzb3VyY2VPcnRoby5zdHlsZX0mVkVSU0lPTj0xLjAuMCZSRVFVRVNUPUdldFRpbGUmZm9ybWF0PSR7c291cmNlT3J0aG8uZm9ybWF0fSZsYXllcj0ke3NvdXJjZU9ydGhvLmxheWVyfSZ0aWxlbWF0cml4c2V0PVBNJlRpbGVNYXRyaXg9e3p9JlRpbGVDb2w9e3h9JlRpbGVSb3c9e3l9YFxuICAgICAgXSxcbiAgICAgIHRpbGVTaXplOiAyNTYsXG4gICAgICBhdHRyaWJ1dGlvbjogJ8KpIDxhIGhyZWY9XCJodHRwczovL3d3dy5pZ24uZnIvXCI+SUdOPC9hPicsXG4gICAgICBtaW56b29tOiAwLFxuICAgICAgbWF4em9vbTogMjJcbiAgICB9KTtcblxuICAgIG1hcC5hZGRMYXllcih7XG4gICAgICBpZDogJ3BsYW5JR04nLFxuICAgICAgdHlwZTogJ3Jhc3RlcicsXG4gICAgICBzb3VyY2U6ICdyYXN0ZXItcGxhbmlnbicsXG4gICAgICBsYXlvdXQ6IHsgdmlzaWJpbGl0eTogJ3Zpc2libGUnIH1cbiAgICB9KTtcblxuICAgIG1hcC5hZGRMYXllcih7XG4gICAgICBpZDogJ29ydGhvSUdOJyxcbiAgICAgIHR5cGU6ICdyYXN0ZXInLFxuICAgICAgc291cmNlOiAncmFzdGVyLW9ydGhvJyxcbiAgICAgIGxheW91dDogeyB2aXNpYmlsaXR5OiAnbm9uZScgfVxuICAgIH0pO1xuXG4gICAgXG4gICAgLy9mZXRjaCgnbGF5ZXJzL2luZGljYXRldXJzLmdlb2pzb24nKVxuICAgICAvLy50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgLy8udGhlbihpbmRpY2F0ZXVyc0dlb2pzb24gPT4geyBcbiAgICAgICAgICAgICAgXG4gICAgXG4gICAgY29uc3QgbGF5ZXJzRGF0YSA9IFtcbiAgICAgIHsgZGF0YTogYmFzc2luX3ZpZW5uZSwgdHlwZTogJ2xpbmUnLCBpZDogJ2Jhc3NpbnZpZW5uZUxheWVyJywgY29sb3I6ICdncmVlbicsIGxheW91dDoge3Zpc2liaWxpdHk6J25vbmUnfX0sXG4gICAgICB7IGRhdGE6IHJlZ2lvbiwgdHlwZTogJ2xpbmUnLCBpZDogJ3JlZ2lvbkxheWVyJywgY29sb3I6ICdyZWQnLCBsYXlvdXQ6IHt2aXNpYmlsaXR5Oidub25lJ30gfSxcbiAgICAgIHsgZGF0YTogZGVwYXJ0ZW1lbnQsIHR5cGU6ICdsaW5lJywgaWQ6ICdkZXBhcnRlbWVudExheWVyJywgY29sb3I6ICcjYTc3MmI5Jywgd2lkdGg6IDIsICBsYXlvdXQ6e3Zpc2liaWxpdHk6J25vbmUnfX0sXG4gICAgICB7IGRhdGE6IGVwY2ksIHR5cGU6ICdsaW5lJywgaWQ6ICdlcGNpTGF5ZXInLCBjb2xvcjogJyM1NjdhZTMnLCBsYXlvdXQ6IHt2aXNpYmlsaXR5Oidub25lJ30gfSxcbiAgICAgIHsgIGRhdGE6IGluZGljYXRldXJzR2VvanNvbiwgLy8gR2VvSlNPTiBjb250ZW5hbnQgdW5lIHByb3ByacOpdMOpICdzMzFhdHgnXG4gICAgICAgICAgdHlwZTogJ2ZpbGwnLFxuICAgICAgICAgIGlkOiAnaW5kaWNhdGV1cnMzMWF0eExheWVyJyxcbiAgICAgICAgICBvcGFjaXR5OiAwLjksXG4gICAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgICAgZHluYW1pY0NvbG9yOiB7IFxuICAgICAgICAgICAgcHJvcGVydHk6ICdzMzFhdHgnLFxuICAgICAgICAgICAgLy8gTGEgbG9naXF1ZSBleGFjdGUgZGUgbGEgbMOpZ2VuZGUgw6AgYXBwbGlxdWVyIDpcbiAgICAgICAgICAgIC8vIC0gMCBvdSBudWxsID0+ICNkOWQ5ZDlcbiAgICAgICAgICAgIC8vIC0gPCAxNTAgICAgID0+ICNmOWYwZDlcbiAgICAgICAgICAgIC8vIC0gPCA1MDAwMDAgID0+ICNmZGI3N2FcbiAgICAgICAgICAgIC8vIC0gPCAyMDAwMDAwID0+ICNlYzYwM0ZcbiAgICAgICAgICAgIC8vIC0gPj0gMjAwMDAwMCA9PiAjYjMwMDAwXG4gICAgICAgICAgICBtYXBwaW5nOiB7XG4gICAgICAgICAgICAgICcwJzogJyNkOWQ5ZDknLFxuICAgICAgICAgICAgICAnMSc6ICcjZmZmNWYwJyxcbiAgICAgICAgICAgICAgJzQnOiAnI2ZjYTQ4NycsXG4gICAgICAgICAgICAgICcxMCc6ICcjZWIzNjJhJyxcbiAgICAgICAgICAgICAgJzIwJzogJyM2NzAwMGQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdDogJyNjZGNkY2QnIC8vIHV0aWxpc8OpIHNpIG51bGwsIHVuZGVmaW5lZCBvdSA8IDE1MFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbGF5b3V0OiB7IHZpc2liaWxpdHk6ICd2aXNpYmxlJyB9XG4gICAgICAgIH0sXG4gICAgICB7IGRhdGE6IHpvbmVfaW5vbmRhYmxlLCB0eXBlOiAnZmlsbCcsIGlkOiAnem9uZWlub25kYWJsZUxheWVyJywgY29sb3I6ICcjYjRjM2VmJyAsIHdpZHRoOiAyLCBvcGFjaXR5OiAxLCBcbiAgICAgIGxheW91dDoge3Zpc2liaWxpdHk6J3Zpc2libGUnfSB9XG4gICAgICBcbiAgICBdO1xuICAgICBcbiAgICAvLyBBam91dCBkZXMgY291Y2hlcyB2ZWN0b3JpZWxsZXNcbiAgICAgIGxheWVyc0RhdGEuZm9yRWFjaChsYXllciA9PiB7XG4gICAgICAgIG1hcC5hZGRTb3VyY2UobGF5ZXIuaWQsIHtcbiAgICAgICAgICB0eXBlOiAnZ2VvanNvbicsXG4gICAgICAgICAgZGF0YTogbGF5ZXIuZGF0YVxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICBjb25zdCBsYXllckNvbmZpZyA9IHtcbiAgICAgICAgICBpZDogbGF5ZXIuaWQsXG4gICAgICAgICAgdHlwZTogbGF5ZXIudHlwZSxcbiAgICAgICAgICBzb3VyY2U6IGxheWVyLmlkLFxuICAgICAgICAgIHBhaW50OiB7fSxcbiAgICAgICAgICBsYXlvdXQ6IGxheWVyLmxheW91dFxuICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIGlmIChsYXllci50eXBlID09PSAnZmlsbCcpIHtcbiAgICAgICAgICBpZiAobGF5ZXIuZHluYW1pY0NvbG9yKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wID0gWydnZXQnLCBsYXllci5keW5hbWljQ29sb3IucHJvcGVydHldO1xuICAgICAgICAgICAgbGF5ZXJDb25maWcucGFpbnRbJ2ZpbGwtY29sb3InXSA9IFtcbiAgICAgICAgICAgICAgJ2Nhc2UnLFxuICAgICAgICAgICAgICBbJyEnLCBbJ2hhcycsIGxheWVyLmR5bmFtaWNDb2xvci5wcm9wZXJ0eV1dLCAnI2NkY2RjZCcsICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9wcmnDqXTDqSBhYnNlbnRlXG4gICAgICAgICAgICAgIFsnYW55JywgWyc9PScsIFsnZ2V0JywgbGF5ZXIuZHluYW1pY0NvbG9yLnByb3BlcnR5XSwgbnVsbF0sIFsnPT0nLCBbJ2dldCcsIGxheWVyLmR5bmFtaWNDb2xvci5wcm9wZXJ0eV0sIDBdXSwgJyNjZGNkY2QnLCAvLyBudWxsIG91IDBcbiAgICAgICAgICAgICAgWyc8PScsIFsnZ2V0JywgbGF5ZXIuZHluYW1pY0NvbG9yLnByb3BlcnR5XSwgMV0sICcjZmZmNWYwJyxcbiAgICAgICAgICAgICAgWyc8JywgWydnZXQnLCBsYXllci5keW5hbWljQ29sb3IucHJvcGVydHldLCA0XSwgJyNmY2E0ODcnLFxuICAgICAgICAgICAgICBbJzwnLCBbJ2dldCcsIGxheWVyLmR5bmFtaWNDb2xvci5wcm9wZXJ0eV0sIDEwXSwgJyNlYjM2MmEnLFxuICAgICAgICAgICAgICBbJz4nLCBbJ2dldCcsIGxheWVyLmR5bmFtaWNDb2xvci5wcm9wZXJ0eV0sIDEwXSwgJyM2NzAwMGQnLFxuICAgICAgICAgICAgICAnI2Q5ZDlkOScgLy8gZmFsbGJhY2tcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxheWVyQ29uZmlnLnBhaW50WydmaWxsLWNvbG9yJ10gPSBsYXllci5jb2xvciB8fCAnIzAwMDAwMCc7XG4gICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICBsYXllckNvbmZpZy5wYWludFsnZmlsbC1vcGFjaXR5J10gPSBsYXllci5vcGFjaXR5IHx8IDAuNDtcbiAgICAgICAgICBsYXllckNvbmZpZy5wYWludFsnZmlsbC1vdXRsaW5lLWNvbG9yJ10gPSAnIzAwMDAwMCc7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKGxheWVyLnR5cGUgPT09ICdsaW5lJykge1xuICAgICAgICAgIGxheWVyQ29uZmlnLnBhaW50WydsaW5lLWNvbG9yJ10gPSBsYXllci5jb2xvciB8fCAnIzAwMDAwMCc7XG4gICAgICAgICAgbGF5ZXJDb25maWcucGFpbnRbJ2xpbmUtd2lkdGgnXSA9IGxheWVyLndpZHRoIHx8IDE7XG4gICAgICAgIH1cblxuICAgICAgICBtYXAuYWRkTGF5ZXIobGF5ZXJDb25maWcpO1xuICAgICAgICBcbiAgICAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgICAgICAgICAgICBpZDogJ2luZGljYXRldXJzMzFhdHhMYWJlbHMnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3N5bWJvbCcsXG4gICAgICAgICAgICAgICAgICBzb3VyY2U6ICdpbmRpY2F0ZXVyczMxYXR4TGF5ZXInLCAvLyBsZSBtw6ptZSBpZCBxdWUgdGEgc291cmNlIEdlb0pTT05cbiAgICAgICAgICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgICAgICAgICAndGV4dC1maWVsZCc6IFsnZ2V0JywgJ25vbSddLFxuICAgICAgICAgICAgICAgICAgICAndGV4dC1zaXplJzogMTEsXG4gICAgICAgICAgICAgICAgICAgICd0ZXh0LWZvbnQnOiBbJ09wZW4gU2FucyBCb2xkJywgJ0FyaWFsIFVuaWNvZGUgTVMgQm9sZCddLFxuICAgICAgICAgICAgICAgICAgICAndGV4dC1vZmZzZXQnOiBbMCwgMC42XSxcbiAgICAgICAgICAgICAgICAgICAgJ3RleHQtYW5jaG9yJzogJ3RvcCdcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBwYWludDoge1xuICAgICAgICAgICAgICAgICAgICAndGV4dC1jb2xvcic6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RleHQtaGFsby1jb2xvcic6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RleHQtaGFsby13aWR0aCc6IDFcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgbWFwLmFkZExheWVyKHtcbiAgICAgICAgICAgICAgICAgaWQ6ICdpbmRpY2F0ZXVyczMxYXR4LWhvdmVyJyxcbiAgICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICAgICAgICAgICBzb3VyY2U6ICdpbmRpY2F0ZXVyczMxYXR4TGF5ZXInLCAvLyBtw6ptZSBzb3VyY2VcbiAgICAgICAgICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAnbGluZS1jb2xvcic6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICAgICAnbGluZS13aWR0aCc6IDJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgIGZpbHRlcjogWyc9PScsICdub20nLCAnJ10gLy8gdmlkZSBhdSBkw6lidXRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICBtYXAub24oJ2NsaWNrJywgJ2luZGljYXRldXJzMzFhdHhMYXllcicsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSBlLmZlYXR1cmVzWzBdO1xuICAgICAgXG4gICAgICAgIGNvbnN0IG5vbSA9IGZlYXR1cmUucHJvcGVydGllcy5ub20gfHwgJ05vbiBkaXNwb25pYmxlJztcbiAgICAgIFxuICAgICAgICBjb25zdCBwb3B1bGF0aW9uID0gZmVhdHVyZS5wcm9wZXJ0aWVzLnBvcHVsYXRpb25cbiAgICAgICAgICA/IGZlYXR1cmUucHJvcGVydGllcy5wb3B1bGF0aW9uLnRvTG9jYWxlU3RyaW5nKCdmci1GUicpICsgJyBoYWJpdGFudHMnXG4gICAgICAgICAgOiAnTm9uIGRpc3BvbmlibGUnO1xuICAgICAgXG4gICAgICAgIGNvbnN0IHMzMWF0eFZhbHVlID0gcGFyc2VGbG9hdChmZWF0dXJlLnByb3BlcnRpZXMuczMxYXR4KTtcbiAgICAgICAgY29uc3QgZG9tbWFnZXMgPSAhaXNOYU4oczMxYXR4VmFsdWUpXG4gICAgICAgICAgPyBzMzFhdHhWYWx1ZS50b0xvY2FsZVN0cmluZygnZnItRlInKSArICcgJSdcbiAgICAgICAgICA6ICcwICUnO1xuICAgICAgICBjb25zdCBzMzFhcG9wVmFsdWUgPSBwYXJzZUZsb2F0KGZlYXR1cmUucHJvcGVydGllcy5zMzFhcG9wKTtcbiAgICAgICAgY29uc3QgaGFiX2lub25kYWJsZSA9ICFpc05hTihzMzFhcG9wVmFsdWUpXG4gICAgICAgICAgPyBzMzFhcG9wVmFsdWUudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJylcbiAgICAgICAgICA6ICcwJztcbiAgICAgICAgY29uc3QgYmF0aW1lbnRzVmFsdWUgPSBmZWF0dXJlLnByb3BlcnRpZXMubmJfYmF0aW1lbnRzO1xuICAgICAgICBjb25zdCBiYXRpbWVudHMgPSAhaXNOYU4ocGFyc2VGbG9hdChiYXRpbWVudHNWYWx1ZSkpXG4gICAgICAgICAgPyBwYXJzZUludChiYXRpbWVudHNWYWx1ZSkudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJylcbiAgICAgICAgICA6ICdOb24gZGlzcG9uaWJsZSc7XG4gICAgICAgIGNvbnN0IGJhdGluZGlmID0gZmVhdHVyZS5wcm9wZXJ0aWVzLm5iX2JhdF9pbmRpZj8udG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7XG4gICAgICAgIGNvbnN0IGJhdHNwb3J0aWZWYWx1ZSA9IHBhcnNlRmxvYXQoZmVhdHVyZS5wcm9wZXJ0aWVzLm5iX2JhdF9zcG9ydGlmKTtcbiAgICAgICAgY29uc3QgYmF0c3BvcnRpZiA9ICghaXNOYU4oYmF0c3BvcnRpZlZhbHVlKSA/IGJhdHNwb3J0aWZWYWx1ZSA6IDApLnRvTG9jYWxlU3RyaW5nKCdmci1GUicpO1xuICAgICAgICBjb25zdCBiYXRhZ3JpY29sZWZWYWx1ZSA9IHBhcnNlRmxvYXQoZmVhdHVyZS5wcm9wZXJ0aWVzLm5iX2JhdF9hZ3JpY29sZSk7XG4gICAgICAgIGNvbnN0IGJhdGFncmljb2xlID0gKCFpc05hTihiYXRhZ3JpY29sZWZWYWx1ZSkgPyBiYXRhZ3JpY29sZWZWYWx1ZSA6IDApLnRvTG9jYWxlU3RyaW5nKCdmci1GUicpO1xuICAgICAgICBjb25zdCBiYXRyZXNpZGVudGllbFZhbHVlID0gcGFyc2VGbG9hdChmZWF0dXJlLnByb3BlcnRpZXMubmJfYmF0X3Jlc2lkZW50aWVsKTtcbiAgICAgICAgY29uc3QgYmF0cmVzaWRlbnRpZWwgPSAoIWlzTmFOKGJhdHJlc2lkZW50aWVsVmFsdWUpID8gYmF0cmVzaWRlbnRpZWxWYWx1ZSA6IDApLnRvTG9jYWxlU3RyaW5nKCdmci1GUicpO1xuXG4gICAgICBcbiAgICAgICAgY29uc3QgcG9wdXBDb250ZW50ID0gYFxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgLm1hcGxpYnJlZ2wtcG9wdXAtY29udGVudCB7XG4gICAgICAgICAgICBwYWRkaW5nOiA0cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgICAgd2lkdGg6IG1heC1jb250ZW50O1xuICAgICAgICAgICAgYm94LXNoYWRvdzogcmdiYSgxMDEsIDE0NywgMjIwLCAwLjIpIDBweCA0cHggOHB4IDBweDtcbiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogcmdiYSgxMDEsIDE0NywgMjIwLCAwLjUpO1xuICAgICAgICAgIH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMTNweDsgbWFyZ2luOjEwcHg7XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNkMWVlOWM7IGJvcmRlcjogMXB4IHNvbGlkOyBib3JkZXItcmFkaXVzOjhweDsgbWFyZ2luLWJvdHRvbToxNnB4OyBwYWRkaW5nOjEwcHg7XCI+PHN0cm9uZz5cbiAgICAgICAgICA8Y2VudGVyPiR7bm9tfTwvY2VudGVyPlxuICAgICAgICAgIDwvc3Ryb25nPjwvZGl2PlxuICAgICAgICAgICAgPHA+PHN0cm9uZz5Qb3B1bGF0aW9uIDo8L3N0cm9uZz4gJHtwb3B1bGF0aW9ufTwvcD5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+VGF1eCBkJ2hhYml0YW50cyBlbiB6b25lIGlub25kYWJsZSA6PC9zdHJvbmc+ICR7ZG9tbWFnZXN9PC9wPlxuICAgICAgICAgICAgPHA+PHN0cm9uZz5Ob21icmUgZCdoYWJpdGFudHMgZW4gem9uZSBpbm9uZGFibGUgOjwvc3Ryb25nPiAke2hhYl9pbm9uZGFibGV9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgXG4gICAgICBcbiAgICAgICAgbmV3IG1hcGxpYnJlZ2wuUG9wdXAoe2Nsb3NlQnV0dG9uOiBmYWxzZX0pXG4gICAgICAgICAgLnNldExuZ0xhdChlLmxuZ0xhdClcbiAgICAgICAgICAuc2V0SFRNTChwb3B1cENvbnRlbnQpXG4gICAgICAgICAgLmFkZFRvKG1hcCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTWV0dHJlIMOgIGpvdXIgbGUgY29udGVuZXVyIEhUTUwgYXZlYyBsZXMgaW5mb3JtYXRpb25zIHNww6ljaWZpcXVlcyBkdSBtYXJxdWV1ciBcbiAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb25uZWVzJykuaW5uZXJIVE1MID0gYFxuICAgICAgICAgPHN0cm9uZyBzdHlsZT1cImZvbnQtc2l6ZToxLjJlbVwiPjxpIGNsYXNzPVwiYmkgYmktZ2VvLWFsdC1maWxsXCI+PC9pPiBDb21tdW5lIDo8L3N0cm9uZz4gJHtub219PGJyPlxuICAgICAgICAgPHN0cm9uZyBzdHlsZT1cImZvbnQtc2l6ZToxLjJlbVwiPjxpIGNsYXNzPVwiYmkgYmktcGVvcGxlLWZpbGxcIj48L2k+IE5vbWJyZSBkJ2hhYml0YW50cyA6PC9zdHJvbmc+ICAgICAgJHtwb3B1bGF0aW9ufTxicj5cbiAgICAgICAgIDxzdHJvbmcgc3R5bGU9XCJmb250LXNpemU6MS4yZW1cIj48aSBjbGFzcz1cImJpIGJpLXBlcmNlbnRcIj48L2k+IFRhdXggZCdoYWJpdGFudHMgZW4gem9uZSBpbm9uZGFibGUgOjwvc3Ryb25nPiAke2RvbW1hZ2VzfTxicj5cbiAgICAgICAgIDxzdHJvbmcgc3R5bGU9XCJmb250LXNpemU6MS4yZW1cIj48aSBjbGFzcz1cImJpIGJpLXBlcnNvbi1maWxsXCI+PC9pPiBOb21icmUgZCdoYWJpdGFudHMgZW4gem9uZSBpbm9uZGFibGUgICAgICAgICAgICAgICAgIDo8L3N0cm9uZz4gJHtoYWJfaW5vbmRhYmxlfTxicj5cbiAgICAgICAgIDxzdHJvbmcgc3R5bGU9XCJmb250LXNpemU6MS4yZW1cIj48aSBjbGFzcz1cImJpIGJpLWhvdXNlLWZpbGxcIj48L2k+IE5vbWJyZSBkZSBiw6J0aW1lbnRzIDo8L3N0cm9uZz4gJHtiYXRpbWVudHN9PGJyPlxuICAgICAgICAgPHN0cm9uZyBzdHlsZT1cIm1hcmdpbi1sZWZ0OjglO1wiPkRvbnQgOiA8L3N0cm9uZz5cbiAgICAgICAgIDxsaSBzdHlsZT1cIm1hcmdpbi1sZWZ0OjE1JTtcIj48aDUgc3R5bGU9XCJmb250LXNpemU6MWVtO1wiPiAke2JhdGluZGlmfTxzdHJvbmc+IGLDonRpbWVudHMgaW5kaWZmw6lyZW5jacOpczwvc3Ryb25nPjwvaDU+PC9saT5cbiAgICAgICAgIDxsaSBzdHlsZT1cIm1hcmdpbi1sZWZ0OjE1JTtcIj48aDUgc3R5bGU9XCJmb250LXNpemU6MWVtO1wiPiAke2JhdHNwb3J0aWZ9PHN0cm9uZz4gYsOidGltZW50cyBzcG9ydGlmczwvc3Ryb25nPjwvaDU+PC9saT5cbiAgICAgICAgIDxsaSBzdHlsZT1cIm1hcmdpbi1sZWZ0OjE1JTtcIj48aDUgc3R5bGU9XCJmb250LXNpemU6MWVtO1wiPiAke2JhdGFncmljb2xlfTxzdHJvbmc+IGLDonRpbWVudHMgYWdyaWNvbGVzPC9zdHJvbmc+PC9oNT48L2xpPlxuICAgICAgICAgPGxpIHN0eWxlPVwibWFyZ2luLWxlZnQ6MTUlO1wiPjxoNSBzdHlsZT1cImZvbnQtc2l6ZToxZW07XCI+ICR7YmF0cmVzaWRlbnRpZWx9PHN0cm9uZz4gYsOidGltZW50cyByw6lzaWRlbnRpZWxzPC9zdHJvbmc+PC9oNT48L2xpPlxuICAgICAgICAgYDtcbiAgICAgIH0pO1xuXG4gICAgICBtYXAub24oJ21vdXNlbW92ZScsICdpbmRpY2F0ZXVyczMxYXR4TGF5ZXInLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3Qgbm9tQ29tbXVuZSA9IGUuZmVhdHVyZXNbMF0ucHJvcGVydGllcy5ub207XG4gICAgICBcbiAgICAgICAgICBtYXAuc2V0RmlsdGVyKCdpbmRpY2F0ZXVyczMxYXR4LWhvdmVyJywgWyc9PScsICdub20nLCBub21Db21tdW5lXSk7XG4gICAgICBcbiAgICAgICAgICBtYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgICBtYXAub24oJ21vdXNlbGVhdmUnLCAnaW5kaWNhdGV1cnMzMWF0eExheWVyJywgKCkgPT4ge1xuICAgICAgICAgIG1hcC5zZXRGaWx0ZXIoJ2luZGljYXRldXJzMzFhdHgtaG92ZXInLCBbJz09JywgJ25vbScsICcnXSk7XG4gICAgICAgICAgbWFwLmdldENhbnZhcygpLnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gSW50ZXJmYWNlIGRlIGNvbnRyw7RsZSBkZXMgY291Y2hlc1xuICAgIGNvbnN0IG1hcExheWVyc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG1hcExheWVyc0Rpdi5jbGFzc0xpc3QuYWRkKCdtYXBMYXllcnMnKTtcbiAgICBtYXBMYXllcnNEaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG1hcExheWVyc0Rpdi5zdHlsZS56SW5kZXggPSAnMTAwMCc7XG4gICAgbWFwTGF5ZXJzRGl2LmlubmVySFRNTCA9IGBcbiAgICAgIDxidXR0b24gaWQ9XCJ0b2dnbGVNYXBNZW51QnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWxpZ2h0IGFyaWEtbGFiZWw9XCJBZmZpY2hlciBsZXMgY291Y2hlc1wiIHRpdGxlPVwiQWZmaWNoZXIgbGVzIGNvdWNoZXNcIj5cbiAgICAgICAgPGltZyBzcmM9XCJJbWFnZXMvaWNvbnMvbGF5ZXJzLWhhbGYuc3ZnXCIgYWx0PVwiSWPDtG5lIFNWR1wiIHdpZHRoPVwiMjVcIiBoZWlnaHQ9XCIyNVwiPlxuICAgICAgPC9idXR0b24+XG4gICAgICA8ZGl2IGlkPVwibGF5ZXJzTGlzdFwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XCI+PC9kaXY+XG4gICAgYDtcbiAgICBtYXAuZ2V0Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQobWFwTGF5ZXJzRGl2KTtcblxuICAgIGNvbnN0IHRvZ2dsZWFibGVMYXllcklkcyA9IGxheWVyc0RhdGEubWFwKGxheWVyID0+IGxheWVyLmlkKTtcbiAgICBjb25zdCBhbGlhc0xheWVySWRzID0ge1xuICAgICAgYmFzc2ludmllbm5lTGF5ZXI6ICdCYXNzaW4gZGUgbGEgVmllbm5lJyxcbiAgICAgIHJlZ2lvbkxheWVyOiAnUsOpZ2lvbicsXG4gICAgICBkZXBhcnRlbWVudExheWVyOiAnRMOpcGFydGVtZW50JyxcbiAgICAgIGVwY2lMYXllcjogJ0VQQ0knLFxuICAgICAgem9uZWlub25kYWJsZUxheWVyOiAnWm9uYWdlIElub25kYWJsZScsXG4gICAgICBpbmRpY2F0ZXVyczMxYXR4TGF5ZXI6ICdEb21tYWdlcyBmaW5hbmNpZXJzIGRlcyBlbnRyZXByaXNlcydcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlTGF5ZXJWaXNpYmlsaXR5KGlkLCB2aXNpYmxlKSB7XG4gICAgICBjb25zdCB2aXNpYmlsaXR5ID0gdmlzaWJsZSA/ICd2aXNpYmxlJyA6ICdub25lJztcbiAgICAgIGlmIChtYXAuZ2V0TGF5ZXIoaWQpKSB7XG4gICAgICAgIG1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpZCwgJ3Zpc2liaWxpdHknLCB2aXNpYmlsaXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsYXllcnNMaXN0RGl2ID0gbWFwTGF5ZXJzRGl2LnF1ZXJ5U2VsZWN0b3IoJyNsYXllcnNMaXN0Jyk7XG4gICAgXG4gICAgdG9nZ2xlYWJsZUxheWVySWRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGFsaWFzTGF5ZXJJZHNbaWRdIHx8IGlkO1xuXG4gICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgIGNoZWNrYm94LmlkID0gaWQ7XG4gICAgICBjaGVja2JveC5jbGFzc05hbWUgPSAnZm9ybS1jaGVjay1pbnB1dCc7XG4gICAgICBcbiAgICAgIC8vIOKchSBMaXJlIGxhIHZpc2liaWxpdMOpIGFjdHVlbGxlIGRpcmVjdGVtZW50IGRhbnMgbGEgY2FydGVcbiAgICAgIG1hcC5vbmNlKCdpZGxlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCB2aXNpYmlsaXR5ID0gbWFwLmdldExheW91dFByb3BlcnR5KGlkLCAndmlzaWJpbGl0eScpO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdmlzaWJpbGl0eSA9PT0gJ3Zpc2libGUnO1xuICAgICAgfSk7XG4gIFxuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gdG9nZ2xlTGF5ZXJWaXNpYmlsaXR5KGlkLCBjaGVja2JveC5jaGVja2VkKSk7XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgIGxhYmVsLmh0bWxGb3IgPSBpZDtcbiAgICAgIGxhYmVsLmNsYXNzTmFtZSA9ICdmb3JtLWNoZWNrLWxhYmVsJztcbiAgICAgIGxhYmVsLmlubmVyVGV4dCA9IG5hbWU7XG5cbiAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ2Zvcm0tY2hlY2snO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGxhYmVsKTtcblxuICAgICAgbGF5ZXJzTGlzdERpdi5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGVNYXBNZW51QnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBsYXllcnNMaXN0RGl2LnN0eWxlLmRpc3BsYXkgPSBsYXllcnNMaXN0RGl2LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgfSk7XG4gICAgIFxuXG4gICAgLy8gTWVudSBiYXNjdWxlIGZvbmQgZGUgcGxhblxuICAgIGNvbnN0IG1hcE1lbnVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtYXBNZW51RGl2LmNsYXNzTGlzdC5hZGQoJ21hcEZvbmREZVBsYW4nKTtcbiAgICBtYXBNZW51RGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBtYXBNZW51RGl2LnN0eWxlLnpJbmRleCA9ICcxMDAwJztcbiAgICBtYXBNZW51RGl2LmlubmVySFRNTCA9IGBcbiAgICAgIDxzdHJvbmc+Rm9uZCBkZSBwbGFuIDo8L3N0cm9uZz5cbiAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNoZWNrIGZvcm0tc3dpdGNoXCI+XG4gICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIiByb2xlPVwic3dpdGNoXCIgaWQ9XCJvcnRob0NoZWNrYm94XCI+XG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tY2hlY2stbGFiZWxcIiBmb3I9XCJvcnRob0NoZWNrYm94XCI+UGhvdG9zIGHDqXJpZW5uZXM8L2xhYmVsPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgICBtYXAuZ2V0Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQobWFwTWVudURpdik7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3J0aG9DaGVja2JveCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdG9nZ2xlU3R5bGUodGhpcy5jaGVja2VkKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBcbjxkaXYgaWQ9XCJkb25uZWVzXCIgc3R5bGU9XCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMTZweDsgbGluZS1oZWlnaHQ6IDEuNTsgbWFyZ2luLXRvcDoxJTtcIj5cbiAgICBDbGlxdWV6IHN1ciB1bmUgY29tbXVuZSBwb3VyIHZvaXIgbGVzIGluZm9ybWF0aW9ucyBpY2kuPGJyPlxuPC9kaXY+XG5cbmBcblxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG5pbXBvcnQgeyBQbG90IGFzIFBsb3RUYXV4IH0gZnJvbSBcIkBvYnNlcnZhYmxlaHEvcGxvdFwiO1xuaW1wb3J0IHsgSW5wdXRzIGFzIElucHV0c1RhdXggfSBmcm9tIFwiQG9ic2VydmFibGVocS9pbnB1dHNcIjtcblxuLy8gQ2hhcmdlciBsZXMgZG9ubsOpZXNcbmRhdGEgPSBGaWxlQXR0YWNobWVudChcImxheWVycy9kYXRhX3MzMWF0eC5qc29uXCIpLmpzb24oKVxuXG4vLyBMYWJlbCBkdSBzbGlkZXJcbmh0bWxgPGxhYmVsIGZvcj1cInNsaWRlci1zMzFhdHhcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tdG9wOiAxZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBtYXJnaW4tYm90dG9tOiAxZW07XG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC42KTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCA4cHggMHB4IHJnYmEoMCwgMCwgMCwgMC44KTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBwYWRkaW5nOiA1cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXJpZ2h0OiAyMCU7XG4gIG1hcmdpbi1sZWZ0OiAyMCU7XCI+XG4gIFRhdXggZCdoYWJpdGFudHMgZW4gem9uZSBpbm9uZGFibGUgZW4gJVxuPC9sYWJlbD5gXG5cbi8vIFNsaWRlclxuXG5cbmRhdGFfczMxYXR4ID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvZGF0YV9zMzFhdHguanNvblwiKS5qc29uKClcblxudmlld29mIHNsaWRlcl9zMzFhdHggPSBJbnB1dHNUYXV4LnJhbmdlKFswLCAyMF0sIHtcbiAgdmFsdWU6IDE1LFxuICBzdGVwOiAxLFxuICBsYWJlbDogXCJUYXV4IGQnaGFiaXRhbnRzIGVuIHpvbmUgaW5vbmRhYmxlICglKVwiXG59KVxuXG5zb3J0ZWRfczMxYXR4ID0gZGF0YV9zMzFhdHhcbiAgLm1hcChkID0+ICh7IC4uLmQsIHMzMWF0eDogK2QuczMxYXR4IHx8IDAgfSkpXG4gIC5maWx0ZXIoZCA9PiBkLnMzMWF0eCA8PSBzbGlkZXJfczMxYXR4KVxuICAuc29ydCgoYSwgYikgPT4gYS5zMzFhdHggLSBiLnMzMWF0eClcblxuUGxvdFRhdXgucGxvdCh7XG4gIG1hcmtzOiBbXG4gICAgUGxvdFRhdXguYmFyWShzb3J0ZWRfczMxYXR4LCB7XG4gICAgICB4OiBkID0+IGQubm9tLFxuICAgICAgeTogZCA9PiBkLnMzMWF0eCxcbiAgICAgIGZpbGw6IGQgPT4ge1xuICAgICAgICBjb25zdCB2YWwgPSBkLnMzMWF0eDtcbiAgICAgICAgaWYgKHZhbCA9PT0gMCkgcmV0dXJuIFwiI2NkY2RjZFwiO1xuICAgICAgICBpZiAodmFsIDw9IDEpIHJldHVybiBcIiNmZmY1ZjBcIjtcbiAgICAgICAgaWYgKHZhbCA8IDQpIHJldHVybiBcIiNmY2E0ODdcIjtcbiAgICAgICAgaWYgKHZhbCA8IDEwKSByZXR1cm4gXCIjZWIzNjJhXCI7XG4gICAgICAgIHJldHVybiBcIiM2NzAwMGRcIjtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBQbG90VGF1eC50ZXh0KHNvcnRlZF9zMzFhdHgsIHtcbiAgICAgIHg6IGQgPT4gZC5ub20sXG4gICAgICB5OiBkID0+IGQuczMxYXR4LFxuICAgICAgdGV4dDogZCA9PiBkLnMzMWF0eC50b0xvY2FsZVN0cmluZyhcImZyLUZSXCIpLFxuICAgICAgZHk6IC04LFxuICAgICAgZm9udFNpemU6IDksXG4gICAgICBmaWxsOiBcImJsYWNrXCIsXG4gICAgICB0ZXh0QW5jaG9yOiBcIm1pZGRsZVwiXG4gICAgfSlcbiAgXSxcbiAgeToge1xuICAgIGdyaWQ6IHRydWUsXG4gICAgbGFiZWw6IFwiVGF1eCAoJSlcIixcbiAgICBkb21haW46IFswLCBNYXRoLm1heCguLi5zb3J0ZWRfczMxYXR4Lm1hcChkID0+IGQuczMxYXR4KSldLFxuICAgIHRpY2tGb3JtYXQ6IGQgPT4gZC50b0xvY2FsZVN0cmluZyhcImZyLUZSXCIsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwIH0pXG4gIH0sXG4gIHg6IHtcbiAgICBsYWJlbDogXCJDb21tdW5lXCIsXG4gICAgdGlja1JvdGF0ZTogLTQ1LFxuICAgIGxhYmVsQW5jaG9yOiBcInJpZ2h0XCJcbiAgfSxcbiAgc3R5bGU6IHtcbiAgICBmb250U2l6ZTogXCIxMXB4XCIsXG4gICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXG4gICAgZm9udFdlaWdodDogXCJib2xkXCJcbiAgfSxcbiAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoICogMC45NSxcbiAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjY1LFxuICBtYXJnaW5Cb3R0b206IDEyMCxcbiAgbWFyZ2luVG9wOiA1MCxcbiAgbWFyZ2luTGVmdDogODBcbn0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJcbmltcG9ydCB7IFBsb3QgYXMgUGxvdFBvcCB9IGZyb20gXCJAb2JzZXJ2YWJsZWhxL3Bsb3RcIjtcbmltcG9ydCB7IElucHV0cyBhcyBJbnB1dHNQb3B9IGZyb20gXCJAb2JzZXJ2YWJsZWhxL2lucHV0c1wiO1xuXG4vLyBDaGFyZ2VyIGxlcyBkb25uw6llc1xuZGF0YV9zMzFhcG9wID0gRmlsZUF0dGFjaG1lbnQoXCJsYXllcnMvZGF0YV9zMzFhcG9wLmpzb25cIikuanNvbigpXG5cbi8vIExhYmVsIGR1IHNsaWRlclxuaHRtbGA8bGFiZWwgZm9yPVwic2xpZGVyLXMzMWFwb3BcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tdG9wOiAxZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBtYXJnaW4tYm90dG9tOiAxZW07XG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC42KTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCA4cHggMHB4IHJnYmEoMCwgMCwgMCwgMC44KTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBwYWRkaW5nOiA1cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXJpZ2h0OiAyMCU7XG4gIG1hcmdpbi1sZWZ0OiAyMCU7XCI+XG4gIE5vbWJyZSBkJ2hhYml0YW50cyBlbiB6b25lIGlub25kYWJsZVxuPC9sYWJlbD5gXG5cbi8vIFNsaWRlclxuXG5cbnZpZXdvZiBzbGlkZXJfczMxYXBvcCA9IElucHV0c1BvcC5yYW5nZShbMCwgMTIwMF0sIHtcbiAgdmFsdWU6IDYwMCxcbiAgc3RlcDogMjAsXG4gIGxhYmVsOiBcIk5vbWJyZSBkJ2hhYml0YW50cyBlbiB6b25lIGlub25kYWJsZVwiXG59KVxuXG5zb3J0ZWRfczMxYXBvcCA9IGRhdGFfczMxYXBvcFxuICAubWFwKGQgPT4gKHsgLi4uZCwgczMxYXBvcDogK2QuczMxYXBvcCB8fCAwIH0pKVxuICAuZmlsdGVyKGQgPT4gZC5zMzFhcG9wIDw9IHNsaWRlcl9zMzFhcG9wKVxuICAuc29ydCgoYSwgYikgPT4gYS5zMzFhcG9wIC0gYi5zMzFhcG9wKVxuXG5QbG90VGF1eC5wbG90KHtcbiAgbWFya3M6IFtcbiAgICBQbG90VGF1eC5iYXJZKHNvcnRlZF9zMzFhcG9wLCB7XG4gICAgICB4OiBkID0+IGQubm9tLFxuICAgICAgeTogZCA9PiBkLnMzMWFwb3AsXG4gICAgICBmaWxsOiBkID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gZC5zMzFhcG9wO1xuICAgICAgICBpZiAodmFsID09PSAwKSByZXR1cm4gXCIjY2RjZGNkXCI7XG4gICAgICAgIGlmICh2YWwgPCA2MDApIHJldHVybiBcIiNmY2E0ODdcIjtcbiAgICAgICAgaWYgKHZhbCA8IDEwMDApIHJldHVybiBcIiNlYjM2MmFcIjtcbiAgICAgICAgcmV0dXJuIFwiIzY3MDAwZFwiO1xuICAgICAgfVxuICAgIH0pLFxuICAgIFBsb3RUYXV4LnRleHQoc29ydGVkX3MzMWFwb3AsIHtcbiAgICAgIHg6IGQgPT4gZC5ub20sXG4gICAgICB5OiBkID0+IGQuczMxYXBvcCxcbiAgICAgIHRleHQ6IGQgPT4gZC5zMzFhcG9wLnRvTG9jYWxlU3RyaW5nKFwiZnItRlJcIiksXG4gICAgICBkeTogLTgsXG4gICAgICBmb250U2l6ZTogOSxcbiAgICAgIGZpbGw6IFwiYmxhY2tcIixcbiAgICAgIHRleHRBbmNob3I6IFwibWlkZGxlXCJcbiAgICB9KVxuICBdLFxuICB5OiB7XG4gICAgZ3JpZDogdHJ1ZSxcbiAgICBsYWJlbDogXCJOb21icmUgZCdoYWJpdGFudHNcIixcbiAgICBkb21haW46IFswLCBNYXRoLm1heCguLi5zb3J0ZWRfczMxYXBvcC5tYXAoZCA9PiBkLnMzMWFwb3ApKV0sXG4gICAgdGlja0Zvcm1hdDogZCA9PiBkLnRvTG9jYWxlU3RyaW5nKFwiZnItRlJcIiwgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDAgfSlcbiAgfSxcbiAgeDoge1xuICAgIGxhYmVsOiBcIkNvbW11bmVcIixcbiAgICB0aWNrUm90YXRlOiAtNDUsXG4gICAgbGFiZWxBbmNob3I6IFwicmlnaHRcIlxuICB9LFxuICBzdHlsZToge1xuICAgIGZvbnRTaXplOiBcIjExcHhcIixcbiAgICBmb250RmFtaWx5OiBcInNhbnMtc2VyaWZcIixcbiAgICBmb250V2VpZ2h0OiBcImJvbGRcIlxuICB9LFxuICB3aWR0aDogd2luZG93LmlubmVyV2lkdGggKiAwLjk1LFxuICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuNjUsXG4gIG1hcmdpbkJvdHRvbTogMTIwLFxuICBtYXJnaW5Ub3A6IDUwLFxuICBtYXJnaW5MZWZ0OiA4MFxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFxuXG48dGFibGUgc3R5bGU9XCJ3aWR0aDo5MCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IGJvcmRlcjoxcHggc29saWQ7IHRleHQtYWxpZ246Y2VudGVyOyBtYXJnaW46YXV0bztcIj5cbiAgPGNvbGdyb3VwPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoyMCU7XCI+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjIwJTtcIj5cbiAgICA8Y29sIHN0eWxlPVwid2lkdGg6MjAlO1wiPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoyMCU7XCI+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjIwJTtcIj5cbiAgPC9jb2xncm91cD5cbiAgPHRyPlxuICAgIDx0aCBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDtcIiBjb2xzcGFuPVwiMlwiPk51bcOpcm8gZCdpbmRpY2F0ZXVyPC90aD5cbiAgICA8dGggc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPkluZDIvN2E8L3RoPlxuICAgIDx0aCBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDtcIj5EYXRlIGRlIG1pc2Ugw6Agam91cjwvdGg+XG4gICAgPHRoIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj4zMS8wNS8yMDI1PC90aD5cbiAgPC90cj5cbiAgPHRyPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkOyBmb250LXdlaWdodDogYm9sZDtcIj5JbnRpdHVsw6k8L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiM1wiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5Eb21tYWdlcyBhdXggZW50cmVwcmlzZXMgZW4gZm9uY3Rpb24gZGUgcGFyYW3DqHRyZXMgaHlkcmF1bGlxdWVzPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkOyBmb250LXdlaWdodDogYm9sZDtcIj5PYmplY3RpZiBkZSBsYSBTTkdSSTwvdGQ+XG4gICAgPHRkIGNvbHNwYW49XCIzXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPk9iamVjdGlmIG7CsDIgOiBTdGFiaWxpc2VyIMOgIGNvdXJ0IHRlcm1lIGV0IHLDqWR1aXJlIMOgIG1veWVuIHRlcm1lIGxlIGNvw7t0IGRlcyBkb21tYWdlcyBsacOpcyDDoCBs4oCZaW5vbmRhdGlvbjwvdGQ+XG4gIDwvdHI+XG4gIDx0cj5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+QXhlIGRlIHZ1bG7DqXJhYmlsaXTDqTwvdGQ+XG4gICAgPHRkIGNvbHNwYW49XCIzXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPkF4ZSAyLzMgTGVzIGRvbW1hZ2VzIGF1eCBhY3Rpdml0w6lzIGV0IGF1eCBiaWVuczwvdGQ+XG4gIDwvdHI+XG4gIDx0cj5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+U291cmNlIGRlIHZ1bG7DqXJhYmlsaXTDqTwvdGQ+XG4gICAgPHRkIGNvbHNwYW49XCIzXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlMyLzcgSW5vbmRhdGlvbiBkZXMgYsOidGltZW50cywgZHUgbW9iaWxpZXIgZXQgZGVzIHN0b2NrcywgZXQgcGVydGVzIGTigJlhY3Rpdml0w6kgZGVzIGVudHJlcHJpc2VzPC90ZD5cbiAgPC90cj5cbjwvdGFibGU+XG5cbjxicj5cblxuPHRhYmxlIHN0eWxlPVwid2lkdGg6OTAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBib3JkZXI6MXB4IHNvbGlkOyB0ZXh0LWFsaWduOmNlbnRlcjsgbWFyZ2luOmF1dG87XCI+XG4gIDxjb2xncm91cD5cbiAgICA8Y29sIHN0eWxlPVwid2lkdGg6MjAlO1wiPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoyMCU7XCI+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjIwJTtcIj5cbiAgICA8Y29sIHN0eWxlPVwid2lkdGg6MjAlO1wiPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoyMCU7XCI+XG4gIDwvY29sZ3JvdXA+XG4gIDx0cj5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+TW9kYWxpdMOpcyBkdSBjYWxjdWw8L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiM1wiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5BcHBsaWNhdGlvbiBkZSBsYSBtw6l0aG9kZSBkdSByw6lmw6lyZW50aWVsIG5hdGlvbmFsLlxuICAgIE9uIHV0aWxpc2UgbGUgdGFibGVhdSBkdSBndWlkZSBBTUMgc3VyIGxlcyBkb21tYWdlcyBhdXggZW50cmVwcmlzZXMgKHBvdXIgbOKAmWFsw6lhIGZsdXZpYWwpLCBxdWlcbiAgICBkw6lwZW5kZW50IGR1IHR5cGUgZOKAmWFjdGl2aXTDqSBkZSBs4oCZZW50cmVwcmlzZSAoY29kZSBOQUNFKSwgZGUgbGEgZHVyw6llIGV0IGRlIGxhIGhhdXRldXIgZGVcbiAgICBzdWJtZXJzaW9uLiBPbiBjb25zaWTDqHJlIHF1ZSBsYSBkdXLDqWUgZGUgc3VibWVyc2lvbiBlc3Qgc3Vww6lyaWV1cmUgw6AgNDggaCBkYW5zIHRvdXMgbGVzIGNhcy5cbiAgICBMZXMgcG9pbnRzIEdlby1TaXJlbiBvbnQgw6l0w6kgYWZmZWN0w6lzIGF1eCBiw6J0aW1lbnRzIGRlIGxhIEJEVE9QTywgc29pdCBkaXJlY3RlbWVudCBzaSBsZSBwb2ludCBzZVxuICAgIHRyb3V2ZSBkYW5zIGxlIGLDonRpbWVudCwgc29pdCBhdSBiw6J0aW1lbnQgZGFucyBsYSBwYXJjZWxsZSBsYSBwbHVzIHByb2NoZS5cbiAgICBMYSBjb3VjaGUgZGVzIGLDonRpbWVudHMgKHR5cGUgQUNUSVZJVEUpIGVzdCBjcm9pc8OpZSBhdmVjIGxhIHpvbmUgaW5vbmRhYmxlIGNvbnRlbmFudFxuICAgIGzigJlpbmZvcm1hdGlvbiBkZSBoYXV0ZXVyIGTigJllYXUuPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkOyBmb250LXdlaWdodDogYm9sZDtcIj7DiWNoZWxsZSBkZSByZXByw6lzZW50YXRpb248L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiM1wiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5Db21tdW5hbGU8L3RkPlxuICA8L3RyPlxuICA8dHI+XG4gICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNjNGUzZmY7IGJvcmRlcjoxcHggc29saWQ7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPlBvaW50cyBkZSB2aWdpbGFuY2U8L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiM1wiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5MZXMgcG9pbnRzIGRlIGxhIGJhc2UgZ2VvLXNpcmVuIG9udCBkaWZmw6lyZW50cyBuaXZlYXV4IGRlIHByw6ljaXNpb24sIHF1aSB2b250IGR1ICAgICAgICAgICAgIG51bcOpcm8gZHUgYsOidGltZW50LCDDoCBsYSBydWUgZXQgYXUgY2VudHJlIGRlIGxhIGNvbW11bmUuIFNldWxzIGxlcyBwb2ludHMgZ8Opb2NvZMOpcyBhdSBiw6J0aW1lbnRzIG9udCDDqXTDqVxuICAgIHByaXMgZW4gY29tcHRlLiBDZWxhIHJlcHLDqXNlbnRlIHBsdXMgZGUgODAlIGRlcyBwb2ludHMgc3VyIGxhIHpvbmUgZOKAmcOpdHVkZS5cbiAgICBMZSBjYWxjdWwgZHUgY2/Du3QgZGVzIGRvbW1hZ2VzIGF1eCBlbnRyZXByaXNlcyBkw6lwZW5kIGRlIGxhIHN1cmZhY2UgZHUgYsOidGltZW50LCBkZSBsYSBoYXV0ZXVyXG4gICAgZCdlYXUsIGRlIGxhIGR1csOpZSBkZSBzdWJtZXJzaW9uIGV0IGR1IHR5cGUgZCdhY3Rpdml0w6kuIExhIHBlcnRlIGQnYWN0aXZpdMOpIG4nZXN0IHBhcyBjb25zaWTDqXLDqWVcbiAgICBkYW5zIGwnZXN0aW1hdGlvbiBkdSBjb8O7dC48L3RkPlxuICA8L3RyPlxuICA8dHI+XG4gICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNjNGUzZmY7IGJvcmRlcjoxcHggc29saWQ7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPlRhYmxlIGNpYmxlPC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjNcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+cF9vYmoyX2NvdXRfZG9tbWFnZXMuczMxYXR4X2RvbW1hZ2VzX2VudHJlcHJpc2VzPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICA8dHI+XG4gICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNjNGUzZmY7IGJvcmRlcjoxcHggc29saWQ7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPlZhcmlhYmxlcyBtb2JpbGlzw6llczwvdGQ+XG4gICAgPHRkIGNvbHNwYW49XCIzXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlp4IDogem9uZSBpbm9uZGFibGUsIFpmIDogZHVyw6llIGRlIHN1Ym1lcnNpb24sIE9jMyA6IGFjdGl2aXTDqTwvdGQ+XG4gIDwvdHI+XG4gIDx0cj5cbiAgPHRyPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkOyBmb250LXdlaWdodDogYm9sZDtcIj5JbmRpY2F0ZXVyIGNvbW11biBTTEdSSSBWaWVubmUvQ2xhaW48L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiM1wiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5ub248L3RkPlxuICA8L3RyPlxuICA8dHI+XG48L3RhYmxlPlxuXG48YnI+XG5cbjx0YWJsZSBzdHlsZT1cIndpZHRoOjkwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYm9yZGVyOjFweCBzb2xpZDsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjphdXRvO1wiPlxuICA8Y29sZ3JvdXA+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjEwJTtcIj5cbiAgICA8Y29sIHN0eWxlPVwid2lkdGg6MTAlO1wiPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoxMCU7XCI+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjEwJTtcIj5cbiAgICA8Y29sIHN0eWxlPVwid2lkdGg6MTAlO1wiPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoxMCU7XCI+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjEwJTtcIj5cbiAgICA8Y29sIHN0eWxlPVwid2lkdGg6MTAlO1wiPlxuICAgIDxjb2wgc3R5bGU9XCJ3aWR0aDoxMCU7XCI+XG4gICAgPGNvbCBzdHlsZT1cIndpZHRoOjEwJTtcIj5cbiAgPC9jb2xncm91cD5cblxuICA8dHI+XG4gICAgPHRkIGNvbHNwYW49XCIxMFwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkOyBmb250LXdlaWdodDogYm9sZDtcIj5Eb25uw6llcyBzb3VyY2VzPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgIDx0aCBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDtcIiBjb2xzcGFuPVwiMlwiPkTDqXNpZ25hdGlvbjwvdGg+XG4gICAgPHRoIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkO1wiPk1pbGzDqXNpbWU8L3RoPlxuICAgIDx0aCBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6I2M0ZTNmZjsgYm9yZGVyOjFweCBzb2xpZDtcIj5OYXRpb25hbGUvbG9jYWxlPC90aD5cbiAgICA8dGggc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNjNGUzZmY7IGJvcmRlcjoxcHggc29saWQ7XCI+Rm9ybWF0PC90aD5cbiAgICA8dGggc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiNjNGUzZmY7IGJvcmRlcjoxcHggc29saWQ7XCI+VHlwZTwvdGg+XG4gICAgPHRoIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkO1wiIGNvbHNwYW49XCIyXCI+UHJvZHVjdGV1cjwvdGg+XG4gICAgPHRoIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjojYzRlM2ZmOyBib3JkZXI6MXB4IHNvbGlkO1wiIGNvbHNwYW49XCIyXCI+Tm9tIGZpY2hpZXI8L3RoPlxuICA8L3RyPlxuICA8dHI+XG4gICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlpvbmUgaW5vbmRhYmxlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPjIwMTk8L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+TG9jYWxlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlNoYXBlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlBvbHlnb25lPC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+Q2VyZW1hPC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+Wnhfem9uZV9pbm9uZGFibGUuc2hwPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5IYXV0ZXVycyBk4oCZZWF1IHBhciBwYXMgZGUgMTAgY208L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+MjAxOTwvdGQ+XG4gICAgPHRkIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5Mb2NhbGU8L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+U2hhcGU8L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+UG9seWdvbmU8L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5DZXJlbWE8L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5oYXV0ZXVyX3Bhc18xMGNtLnNocDwvdGQ+XG4gIDwvdHI+XG4gIDx0cj5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+QmFzZSBnZW8tc2lyZW4gZGVzIGVudHJlcHJpc2VzPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPjIwMjE8L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+TmF0aW9uYWxlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlNoYXBlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlBvaW50PC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+SU5TRUU8L3RkPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5nZW9fc2lyZXQuc2hwPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgIDx0ZCBjb2xzcGFuPVwiMlwiIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5Gb25jdGlvbiBkZSBkb21tYWdlcyBhdXggZW50cmVwcmlzZXMgZHUgZ3VpZGUgQU1DPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPjIwMTY8L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+TmF0aW9uYWxlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPkNzdjwvdGQ+XG4gICAgPHRkIHN0eWxlPVwiYm9yZGVyOjFweCBzb2xpZDtcIj5UYWJsZWF1PC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+Q0dERDwvdGQ+XG4gICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPmFtY19kb21tYWdlc19mbHV2aWFsX2VudHJlcHJpc2U8L3RkPlxuICA8L3RyPlxuICA8dHI+XG4gICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPkNvbW11bmVzIChCRFRPUE8pPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPjIwMjA8L3RkPlxuICAgIDx0ZCBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+TmF0aW9uYWxlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlNoYXBlPC90ZD5cbiAgICA8dGQgc3R5bGU9XCJib3JkZXI6MXB4IHNvbGlkO1wiPlBvbHlnb25lPC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+SUdOPC90ZD5cbiAgICA8dGQgY29sc3Bhbj1cIjJcIiBzdHlsZT1cImJvcmRlcjoxcHggc29saWQ7XCI+Q29tbXVuZS5zaHA8L3RkPlxuICA8L3RyPlxuPC90YWJsZT5cblxuXG5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3NsaWRlcl9zMzFhdHgnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc2xpZGVyX3MzMWFwb3AnKSJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/website\.quarto\.pub\/eptb_vienne");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Site créé avec <a href="https://quarto.org/">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
<p>©CEREMA</p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://fr.linkedin.com/company/cerema">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/ceremacom">
      <i class="bi bi-twitter-x" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@cerema3139">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>

<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (_event) {
  if (window.bslib.Card) {
    window.bslib.Card.initializeAllCards();
  }
}); 
</script>
  



</body></html>